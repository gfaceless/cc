{"version":3,"sources":["js/modules/gf-form.module.js","js/modules/message.module.js","ca/js/ca.js","ca/js/templates.js"],"names":["inputAndSelectDirective","restrict","require","link","scope","el","attr","ctrl","one","$apply","touched","MessageModule","angular","module","factory","$timeout","DISPLAY_TIME","status","message","show","hasChanged","tmp","this","_changed","progress","msg","_clearPrevTimeout","success","_timeout","error","defaultMsg","alert","finish","api","duration","timeoutPromise","cancel","directive","MessageApi","$animate","window","$$csp","element","document","find","prepend","replace","$watch","changed","oldVal","addClass","removeClass","template","$http","children","pendingRequests","length","hasPending","spinnerVisible","app","formDirective","priority","attrs","on","attempted","FormError","elem","formCtrl","fieldName","gfFormError","fieldCtrl","Error","$watchCollection","$error","errors","getErrMsg","$invalid","$dirty","val","visible","put","name","order","err","undefined","errMessages","push","required","equals","minlength","maxlength","formCtrlErrors","ret","i","forEach","key","config","$routeProvider","routeStep1","templateUrl","controller","reloadOnSearch","when","otherwise","_step","step","rechoose","crapInfo","updating","$scope","$modal","$log","$window","CrapService","newVal","$location","$routeParams","init","renderArticle","hash","slug","get","Date","data","article","open","size","resolve","$on","articlesMetaData","results","path","start","$modalInstance","$sce","onClose","reason","deregistration","content","trustAsHtml","result","then","$close","$rootScope","ca","majors","submit","caForm","submitting","post","crapResult","back","test","cert","idnumber","certnumber","studNumber","redirect","extend","reapply","print","rechooseMajor","countEnd","countdown","count","isNaN","$parsers","value","re","$isEmpty","$setValidity","run","$templateCache"],"mappings":"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","file":"tmp/app-build-26518e25.js","sourcesContent":["var app = angular.module('gfForm', [])\r\n\r\nvar formDirective = function() {\r\n\r\n\treturn {\r\n\t\t// a priority lower than angular build-in form directive is very important\r\n\t\t// or else we cannot have access to ctrl\r\n\t\tpriority: -400,\r\n\t\trestrict: \"E\",\r\n\t\trequire: \"form\",\r\n\t\tlink: function(scope, el, attrs, ctrl) {\r\n\r\n\t\t\tel.on('submit', function(e) {\r\n\r\n\t\t\t\tscope.$apply(function() {\r\n\t\t\t\t\t\tctrl.attempted = true;\r\n\t\t\t\t\t})\r\n\t\t\t\t// actually we could do something like this\r\n\t\t\t\t// e.stopPropagation()\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction inputAndSelectDirective() {\r\n\treturn {\r\n\t\trestrict: \"E\",\r\n\t\trequire: '?ngModel',\r\n\t\tlink: function(scope, el, attr, ctrl) {\r\n\t\t\tif (!ctrl) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t/*el.on('focus', function () {\r\n\t\t\t    el.addClass('has-focus');\r\n\r\n\t\t\t    scope.$apply(function () {\r\n\t\t\t        ctrl.hasFocus = true;\r\n\t\t\t    });\r\n\t\t\t});*/\r\n\r\n\t\t\tel.one('blur', function() {\r\n\t\t\t\t/*el.removeClass('has-focus');\r\n\t\t\t\tel.addClass('has-visited');*/\r\n\t\t\t\tscope.$apply(function() {\r\n\t\t\t\t\t// angularjs 1.3 implements $touched\r\n\t\t\t\t\t// see https://github.com/angular/angular.js/blob/3e42b22b0e9df95994624d45502e612398d2fc1d/src/ng/directive/ngModel.js#L1042\r\n\t\t\t\t\t// here I just do the minimum.\r\n\t\t\t\t\tctrl.touched = true;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\t/*el.closest('form').on('submit', function () {\r\n\t\t\t    el.addClass('has-visited');\r\n\r\n\t\t\t    scope.$apply(function () {\r\n\t\t\t        ctrl.hasFocus = false;\r\n\t\t\t        ctrl.hasVisited = true;\r\n\t\t\t    });\r\n\t\t\t});*/\r\n\r\n\t\t}\r\n\t};\r\n}\r\n\r\napp.directive(\"form\", formDirective)\r\napp.directive('input', inputAndSelectDirective)\r\napp.directive('select', inputAndSelectDirective)\r\n\r\napp.directive('gfFormError', [\"FormError\", function(FormError) {\r\n\treturn {\r\n\t\trestrict: \"EA\",\r\n\t\trequire: \"^form\",\r\n\t\tscope: {},\r\n\t\tlink: function(scope, elem, attrs, formCtrl) {\r\n\t\t\t// I used to do: ng-show=\"userForm.name.$invalid && userForm.name.$dirty\"\r\n\t\t\tvar fieldName = attrs.gfFormError;\r\n\t\t\tvar fieldCtrl = formCtrl[fieldName];\r\n\t\t\tif (!fieldCtrl) throw new Error(\"no such field name\");\r\n\r\n\t\t\t// note that the following watches may not be necessary\r\n\t\t\t// considering there's no need to change the message content if it is hidden\r\n\r\n\t\t\t// control message content\r\n\t\t\tscope.$watchCollection(function() {\r\n\t\t\t\treturn fieldCtrl.$error\r\n\t\t\t}, function(errors, oldErrors) {\r\n\t\t\t\tscope.message = FormError.getErrMsg(errors);\r\n\t\t\t})\r\n\r\n\t\t\t// control message visibility\r\n\t\t\tscope.$watch(function() {\r\n\t\t\t\treturn fieldCtrl.$invalid && (fieldCtrl.$dirty && fieldCtrl.touched || formCtrl.attempted)\r\n\t\t\t}, function(val, oldVal) {\r\n\t\t\t\tif (val) {\r\n\t\t\t\t\tscope.visible = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tscope.visible = false;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t},\r\n\t\ttemplate: '<span ng-show=\"visible\">{{message}}</span>'\r\n\t}\r\n\r\n}])\r\n\r\n// a service for form validation message\r\n// can be applied like this:\r\n// FormError.put(\"studNumber\", \"学号无效\", 1);\r\n\r\napp.factory(\"FormError\", function() {\r\n\tvar errMessages = [{\r\n\t\t\"required\": \"必填\"\r\n\t}, {\r\n\t\t\"equals\": \"两次输入不一致\"\r\n\t}, {\r\n\t\t\"minlength\": \"字符太少\"\r\n\t}, {\r\n\t\t\"maxlength\": \"字符太多\"\r\n\t}];\r\n\r\n\tfunction put(name, msg, order) {\r\n\t\tvar err = {};\r\n\t\terr[name] = msg;\r\n\t\tif (order === undefined) {\r\n\t\t\terrMessages.push(err);\r\n\t\t} else {\r\n\t\t\terrMessages[order] = err;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\treturn {\r\n\t\tput: put,\r\n\t\tgetErrMsg: function(formCtrlErrors) {\r\n\r\n\t\t\tvar ret;\r\n\t\t\t// angularjs forEach does not support break\r\n\t\t\t// maybe I should use Array.some (and shim IE8)\r\n\t\t\tfor (var i = 0, err; i < errMessages.length; i++) {\r\n\t\t\t\terr = errMessages[i]\r\n\t\t\t\tangular.forEach(err, function(msg, key) {\r\n\t\t\t\t\tif (formCtrlErrors[key]) {\r\n\t\t\t\t\t\tret = msg\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tif (ret) break;\r\n\t\t\t}\r\n\t\t\treturn ret;\r\n\t\t}\r\n\t}\r\n\r\n})\r\n","// see #http://stackoverflow.com/questions/14883476/angularjs-call-method-in-directive-controller-from-other-controller\r\n\r\nvar MessageModule = angular.module('message', []);\r\n\r\n\r\nMessageModule.factory('MessageApi', [\"$timeout\", \"$rootScope\", function($timeout, $rootScope) {\r\n\r\n    // TODO: add animation for improved messaging.\r\n    // move timetoClear logic to directive for possible DOM handling (and for animation-CSS add and removal)\r\n    var DISPLAY_TIME = 2000;\r\n\r\n\r\n    return {\r\n        status: null,\r\n        message: null,\r\n        show: false,\r\n        hasChanged: function() {\r\n            var tmp = this._changed;\r\n            this._changed = false;\r\n            return tmp;\r\n        },\r\n\r\n        progress: function(msg) {\r\n\r\n            this._clearPrevTimeout();\r\n\r\n            this.status = 'info';\r\n            this.message = msg || '操作中，请稍候';\r\n            this.show = true;\r\n            this._changed = true;\r\n\r\n        },\r\n        success: function(msg) {\r\n            this._clearPrevTimeout();\r\n            this._timeout();\r\n\r\n            this.status = 'success';\r\n            this.message = msg || '操作成功';\r\n            this.show = true;\r\n            this._changed = true;\r\n\r\n        },\r\n\r\n        // for now, when error, we force the \"ugly alert\"\r\n        // and hide previous message\r\n\r\n        error: function(msg) {\r\n            // this._clearPrevTimeout();\r\n            // this._timeout();\r\n\r\n            this.show = false;\r\n            this._changed = true;\r\n\r\n            // TODO: make a popup\r\n            var defaultMsg = '操作失败';\r\n\r\n            alert(msg || defaultMsg);\r\n\r\n        },\r\n\r\n        // to think of a better name\r\n        finish: function() {\r\n            var api = this;\r\n\r\n            api.show = false;\r\n            this._changed = true;\r\n\r\n        },\r\n        _timeout: function(duration) {\r\n            duration = duration || DISPLAY_TIME;\r\n\r\n            var api = this;\r\n            this.timeoutPromise = $timeout(function() {\r\n                api.finish();\r\n            }, duration);\r\n\r\n        },\r\n\r\n        // if next call starts before previous call's timeout, we cancel that timeout.\r\n        _clearPrevTimeout: function() {\r\n            if (this.timeoutPromise) {\r\n                $timeout.cancel(this.timeoutPromise);\r\n                this.timeoutPromise = null;\r\n            }\r\n        }\r\n    }\r\n}]);\r\n\r\nMessageModule.directive('message', [\"MessageApi\", \"$timeout\", \"$animate\", function(MessageApi, $timeout, $animate) {\r\n\r\n    /* from https://github.com/angular/angular.js/blob/v1.2.28/src/ng/directive/ngShowHide.js#L237\r\n    * Keep in mind that, as of AngularJS version 1.2.17 (and 1.3.0-beta.11), there is no need to change the display\r\n    * property to block during animation states--ngAnimate will handle the style toggling automatically for you.\r\n    */\r\n\r\n    !window.angular.$$csp() &&\r\n    window.angular.element(document).find('head').prepend(\r\n        '<style type=\"text/css\">@charset \"UTF-8\";.gmessage-hide{display:none!important}.gmessage-hide-add-active,.gmessage-hide-remove{display:inline!important}.gmessage-hide-remove{-webkit-animation:expand .7s ease-out;animation:expand .7s ease-out}.gmessage-hide.gmessage-hide-add{-webkit-animation:fadeOut 1s;animation:fadeOut 1s}@-webkit-keyframes fadeOut{from{opacity:1}to{opacity:0}}@keyframes fadeOut{from{opacity:1}to{opacity:0}}@-webkit-keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@-webkit-keyframes expand{50%{-webkit-transform:scale(1.08);transform:scale(1.08)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes expand{50%{-webkit-transform:scale(1.08);transform:scale(1.08)}to{-webkit-transform:scale(1);transform:scale(1)}}</style>');\r\n\r\n\r\n    return {\r\n        restrict: 'AE',\r\n        scope: {},\r\n        replace: true,\r\n        link: function(scope, el, attrs) {\r\n            scope.api = MessageApi;\r\n\r\n            scope.$watch(function() {\r\n                return MessageApi.hasChanged()\r\n            }, function(changed, oldVal) {\r\n                if(changed || changed === oldVal/*first time run*/){\r\n                    $animate.addClass(el, 'gmessage-hide');\r\n                    if(MessageApi.show){\r\n                        $animate.removeClass(el, 'gmessage-hide');\r\n                    }\r\n                }\r\n            })\r\n\r\n        },\r\n        // todo: remove bootstrap class\r\n        template: '<span class=\"label label-{{api.status}} gf-message\">' +\r\n            \"{{api.message}}\" +\r\n            '</span>'\r\n    }\r\n}])\r\n.directive('spinner', [\"$http\", function($http) {\r\n    return {\r\n        restrict: 'EA',\r\n        scope: {},\r\n        replace: true,\r\n        // should be absoulte path\r\n        template: '<span class=\"spinner\"><img ng-show=\"spinnerVisible\" src=\"/img/ajax-loader.gif\" width=\"20\" height=\"20\" />' +\r\n\r\n            '</span>',\r\n        link: function(scope, element, attr) {\r\n            var img = element.children('img');\r\n\r\n            scope.$watch(function() {\r\n                return $http.pendingRequests.length > 0;\r\n            }, function(hasPending) {\r\n                if (hasPending) {\r\n                    scope.spinnerVisible = true;\r\n                } else {\r\n                    scope.spinnerVisible = false;\r\n                }\r\n            });\r\n        }\r\n    }\r\n}])\r\n\r\n","var app = angular.module('myApp', ['message', 'ui.bootstrap', 'ngSanitize', 'gfForm', 'ngRoute'/*, 'ngAnimate'*/])\r\n\t.config(['$routeProvider', '$locationProvider',\r\n\t\tfunction($routeProvider, $locationProvider) {\r\n\t\t\tvar routeStep1 = {\r\n\t\t\t\ttemplateUrl: 'views/step1.html',\r\n\t\t\t\tcontroller: 'Step1Ctrl',\r\n\t\t\t\treloadOnSearch: false\r\n\t\t\t}\r\n\r\n\r\n\t\t\t$routeProvider\r\n\t\t\t// .when('/', routeStep1)\r\n\t\t\t\t.when('/step1', routeStep1)\r\n\t\t\t\t.when('/step2', {\r\n\t\t\t\t\ttemplateUrl: 'views/step2.html',\r\n\t\t\t\t\tcontroller: 'Step2Ctrl'\r\n\t\t\t\t})\r\n\t\t\t\t.when('/step3', {\r\n\t\t\t\t\ttemplateUrl: 'views/step3.html',\r\n\t\t\t\t\tcontroller: 'Step3Ctrl'\r\n\t\t\t\t})\r\n\r\n\t\t\t\t.otherwise(routeStep1)\r\n\r\n\t\t}\r\n\t])\r\n\t.factory(\"CrapService\", function() {\r\n\t\tvar _step;\r\n\t\treturn {\r\n\t\t\tstep: function(step) {\r\n\t\t\t\t// setter + getter\r\n\t\t\t\tif (!step) return _step;\r\n\t\t\t\t_step = step;\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\trechoose: function() {\r\n\t\t\t\tthis.crapInfo.updating = true;\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\t.controller('appCtrl', [\"$scope\", \"$http\", \"$modal\", \"$log\", \"$window\", \"$timeout\", \"CrapService\", \"$animate\", function($scope, $http, $modal, $log, $window, $timeout, CrapService, $animate) {\r\n\r\n\r\n\r\n\t\t$scope.$watch(function() {\r\n\t\t\treturn CrapService.step();\r\n\t\t}, function(newVal, oldVal) {\r\n\t\t\tif(newVal === oldVal) return;\r\n\t\t\t// step could be undefined, which is expected\r\n\t\t\t$scope.step = newVal || 1;\r\n\t\t})\r\n\r\n\r\n\t\treturn;\r\n\r\n\t\t$scope.$watch(\"updating\", function(val, oldVal) {\r\n\t\t\tif (val === true) {\r\n\t\t\t\t$scope.hasApplied = false;\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t}])\r\n\t.controller('Step1Ctrl', [\"$scope\", \"$http\", \"$location\", \"$routeParams\", \"$modal\", \"CrapService\", \"$timeout\", \"$route\", function($scope, $http, $location, $routeParams, $modal, CrapService, $timeout, $route) {\r\n\t\tCrapService.step(1);\r\n\t\tinit();\r\n\t\t$scope.$on('$routeUpdate', function() {\r\n\t\t\tinit();\r\n\t\t})\r\n\r\n\t\tfunction init(arguments) {\r\n\t\t\trenderArticle($location.hash())\r\n\t\t}\r\n\r\n\t\tfunction renderArticle(slug) {\r\n\t\t\tif (!slug) return;\r\n\r\n\t\t\t$http.get('articles/' + slug + '?ts=' + (+new Date))\r\n\t\t\t\t.success(function(data) {\r\n\t\t\t\t\tvar article = data.article;\r\n\r\n\t\t\t\t\t$modal.open({\r\n\t\t\t\t\t\ttemplateUrl: 'views/article.modal.html',\r\n\t\t\t\t\t\tcontroller: 'ModalInstanceCtrl',\r\n\t\t\t\t\t\tsize: article.size || \"lg\",\r\n\t\t\t\t\t\tresolve: {\r\n\t\t\t\t\t\t\tarticle: function() {\r\n\t\t\t\t\t\t\t\treturn article\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t})\r\n\r\n\t\t}\r\n\r\n\r\n\t\t$http.get(\"articles-meta\")\r\n\t\t\t.success(function(data) {\r\n\t\t\t\t$scope.articlesMetaData = data.results;\r\n\t\t\t})\r\n\t\t$scope.open = function(slug) {\r\n\t\t\t$location.path('/step1')\r\n\t\t\t.hash(slug);\r\n\t\t}\r\n\t\t$scope.start = function() {\r\n\t\t\t$location.path('/step2');\r\n\t\t}\r\n\r\n\t}])\r\n\t.controller('ModalInstanceCtrl', [\"$scope\", \"$modalInstance\", \"article\", \"$sce\", \"$location\", function($scope, $modalInstance, article, $sce, $location) {\r\n\t\tif (article && article.content) {\r\n\t\t\tarticle.content = $sce.trustAsHtml(article.content);\r\n\t\t}\r\n\t\t$scope.article = article;\r\n\r\n\t\t$modalInstance.result.then(onClose, onClose)\r\n\r\n\t\t// maybe there is memory leak.\r\n\t\tvar deregistration = $scope.$on('$locationChangeStart', function() {\r\n\r\n\t\t\t$scope.$close();\r\n\t\t})\r\n\r\n\t\tfunction onClose(reason) {\r\n\r\n\t\t\t// if no reason is supplied, it is a navigation (locationChangeStart) trigger, we do nothing\r\n\t\t\tif (reason) {\r\n\t\t\t\t// if reason is provided, the close is mannually triggered, we first deregistrate $locationChangeStart\r\n\t\t\t\t// and then navigate, to avoid double modal-close (modal itself cannot handle multiple close)\r\n\t\t\t\t// it would be cleanner if I forked angular-bootstrap-modal making it idempotent\r\n\t\t\t\t// (I could have also wrapped $close in try/catch)\r\n\t\t\t\tderegistration();\r\n\t\t\t\t$location.hash('');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}])\r\n\t.controller('Step2Ctrl', [\"$rootScope\", \"$scope\", \"$http\", \"$location\", \"CrapService\", \"$window\", \"$timeout\", function($rootScope, $scope, $http, $location, CrapService, $window, $timeout) {\r\n\r\n\t\tCrapService.step(2);\r\n\t\t$scope.ca = CrapService.crapInfo || {};\r\n\r\n\r\n\t\t$http\r\n\t\t\t.get('major')\r\n\t\t\t.success(function(data) {\r\n\t\t\t\t$scope.majors = data.majors;\r\n\t\t\t});\r\n\r\n\t\t$scope.submit = function() {\r\n\t\t\t// form creates a new scope\r\n\t\t\t// here 'this' is the new scope, its $parent is $scope\r\n\t\t\t// I can remove this logic if I put some stopPropagation in my custom form directive\r\n\t\t\tif (this.caForm.$invalid) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// disable button to prevent double submit\r\n\t\t\t// consider making it a directive\r\n\t\t\t$scope.submitting = true;\r\n\r\n\t\t\t// for later use by other controller\r\n\t\t\tCrapService.crapInfo = $scope.ca;\r\n\r\n\t\t\t$http.post('/ca/credit-apply', $scope.ca)\r\n\t\t\t\t.success(function(data) {\r\n\t\t\t\t\t// step3 can know if we've attemped submitting or not by checking crapResult\r\n\t\t\t\t\t// it can also know if succeed or not\r\n\t\t\t\t\t$rootScope.crapResult = data;\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(data) {\r\n\t\t\t\t\t// TODO: try to make it more iso\r\n\t\t\t\t\t$rootScope.crapResult = {\r\n\t\t\t\t\t\tsuccess: false,\r\n\t\t\t\t\t\treason: 0\r\n\t\t\t\t\t};\r\n\t\t\t\t})['finally'](function() {\r\n\t\t\t\t\t$location.path('/step3')\r\n\t\t\t\t\t$scope.submitting = false;\r\n\t\t\t\t})\r\n\r\n\t\t}\r\n\r\n\t\t$scope.back = function() {\r\n\t\t\tCrapService.crapInfo = $scope.ca;\r\n\t\t\t$location.path('/step1');\r\n\t\t}\r\n\r\n\t\t// tmp:\r\n\t\ttest = $window.test = function() {\r\n\t\t\t$timeout(function() {\r\n\t\t\t\t$scope.ca = {\r\n\t\t\t\t\tcert: {\r\n\t\t\t\t\t\tname: \"张志伟\",\r\n\t\t\t\t\t\tidnumber: \"654324199104120035\",\r\n\t\t\t\t\t\tcertnumber: \"1449003012300160\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tstudNumber: \"201299919911111\"\r\n\t\t\t\t};\r\n\t\t\t})\r\n\t\t}\r\n\t}])\r\n\t.controller('Step3Ctrl', [\"$scope\", \"$rootScope\", \"$location\", \"CrapService\", \"$window\", function($scope, $rootScope, $location, CrapService, $window) {\r\n\r\n\t\tCrapService.step(3);\r\n\t\tif (!$rootScope.crapResult) {\r\n\t\t\t// maybe we should also override history\r\n\t\t\t// $location.replace();\r\n\t\t\t$scope.redirect = function() {\r\n\t\t\t\t$location.path('/step1')\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t// I didn't use service to handle ctrl communication\r\n\t\t// instead I used $rootScope\r\n\t\tangular.extend($scope, $rootScope.crapResult);\r\n\t\t// yes, there is a word 'reapply', you should not use 'reApply'\r\n\t\t$scope.reapply = function() {\r\n\t\t\t$location.path('/step2');\r\n\t\t}\r\n\t\t$scope.print = function() {\r\n\t\t\t$window.print();\r\n\t\t}\r\n\t\t$scope.rechooseMajor = function() {\r\n\t\t\t//\r\n\t\t\tCrapService.rechoose();\r\n\t\t\t$location.path('/step2');\r\n\t\t}\r\n\r\n\t}])\r\n\r\n\r\n\r\n.directive('countdown', [\"$timeout\", function($timeout) {\r\n\t\treturn {\r\n\t\t\t// TODO: find adding class BCP\r\n\t\t\ttemplate: '<span ng-bind=\"count\"></span>',\r\n\t\t\tscope: {\r\n\t\t\t\tcountEnd: \"&\"\r\n\t\t\t},\r\n\t\t\tlink: function(scope, el, attrs) {\r\n\r\n\t\t\t\tscope.count = +attrs['countdown'];\r\n\t\t\t\tif (isNaN(scope.count)) throw new Error('countdown should be a number or string that can be transformed into a number')\r\n\t\t\t\tcountdown();\r\n\r\n\t\t\t\tfunction countdown(arguments) {\r\n\t\t\t\t\t$timeout(function() {\r\n\t\t\t\t\t\tscope.count--;\r\n\t\t\t\t\t\tif (scope.count) {\r\n\t\t\t\t\t\t\tcountdown();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tscope.countEnd && scope.countEnd();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 1000)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}])\r\n\t// for validation\r\n\t.directive('studNumber', [\"FormError\", function(FormError) {\r\n\t\tFormError.put(\"studNumber\", \"学号无效\", 1);\r\n\t\treturn {\r\n\t\t\trequire: \"ngModel\",\r\n\t\t\tlink: function(scope, el, attrs, ctrl) {\r\n\r\n\r\n\t\t\t\tctrl.$parsers.push(function(value) {\r\n\r\n\t\t\t\t\tvar re = /^20\\d{2}\\d{3}[1-3]\\d{7}$/;\r\n\t\t\t\t\tif (ctrl.$isEmpty(value) || re.test(value)) {\r\n\t\t\t\t\t\tctrl.$setValidity('studNumber', true);\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctrl.$setValidity('studNumber', false);\r\n\t\t\t\t\treturn undefined;\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}])/*\r\n\t.animation('.current-step', function() {\r\n\t  return {\r\n\t    enter: function(element, done) {\r\n\t    \tconsole.log('in js animation enter');\r\n\t      //run the animation here and call done when the animation is complete\r\n\t      return function(cancelled) {\r\n\t        //this (optional) function will be called when the animation\r\n\t        //completes or when the animation is cancelled (the cancelled\r\n\t        //flag will be set to true if cancelled).\r\n\t      };\r\n\t    },\r\n\t    leave: function(element, done) {console.log('in js animation leave'); },\r\n\t    move: function(element, done) {console.log('in js animation move'); },\r\n\r\n\t    //animation that can be triggered before the class is added\r\n\t    // beforeAddClass: function(element, className, done) {console.log('in js animation beforeAddClass'); },\r\n\r\n\t    //animation that can be triggered after the class is added\r\n\t    addClass: function(element, className, done) {console.log('in js animation addClass'); done();},\r\n\r\n\t    //animation that can be triggered before the class is removed\r\n\t    beforeRemoveClass: function(element, className, done) {console.log('in js animation beforeRemoveClass'); done();},\r\n\r\n\t    //animation that can be triggered after the class is removed\r\n\t    removeClass: function(element, className, done) {console.log('in js animation removeClass'); done(); }\r\n\t  };\r\n\t});*/","angular.module(\"myApp\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"views/article.modal.html\",\"<div class=\\\"modal-readme\\\">\\r\\n    <div class=\\\"modal-header\\\" ng-if=\\\"article.title\\\">\\r\\n        <h3 class=\\\"modal-title\\\">{{article.title}}</h3>\\r\\n    </div>\\r\\n    <div class=\\\"modal-body\\\" ng-bind-html=\\\"article.content\\\">\\r\\n        \\r\\n    </div>\\r\\n    <div class=\\\"modal-footer\\\">\\r\\n        <button class=\\\"btn btn-primary\\\" ng-click=\\\"$close(\\'some reason\\')\\\">确认</button>\\r\\n    </div>\\r\\n\\r\\n</div>\\r\\n\");\n$templateCache.put(\"views/failure.html\",\"<div class=\\\"appl-result\\\">\\r\\n    <div class=\\\"alert alert-danger\\\">对不起，审核未通过。未通过原因：</div>\\r\\n\\r\\n    <div ng-show=\\\"reason==\\'0\\'\\\">请检查你的填写信息以及网络，若不是您的问题，请联系我们</div>\\r\\n\\r\\n    <div ng-show=\\\"reason==\\'1\\'\\\">您未取得机械行业职业资格证书，请获取证书后再进行申报</div>\\r\\n\\r\\n    <div ng-show=\\\"reason==\\'2\\'\\\">您申报的职业工种与所置换的远程教育专业不匹配，请仔细阅读步骤一中的学分置换范围及置换办法后再申报</div>\\r\\n    <div ng-show=\\\"reason==\\'3\\'\\\">您的职业资格证书级别暂不符合置换范围，请取得三级（高级）及以上级别再申请。详见步骤一中的学分置换范围及置换办法</div>\\r\\n\\r\\n    \\r\\n</div>\\r\\n\\r\\n\\r\\n<button ng-click=\\\"restart()\\\" class=\\\"btn btn-lg btn-primary\\\">重新申请</button>\");\n$templateCache.put(\"views/report.html\",\"<div class=\\\"report\\\">\\r\\n    <span>认证报告编号:</span> <span>{{report._id}}</span>\\r\\n    <table class=\\\"table table-bordered table-hover text-center\\\">\\r\\n        <tr>\\r\\n            <td>身份证号</td>\\r\\n            <td>{{report.idnumber}}</td>\\r\\n        </tr>\\r\\n        <tr>\\r\\n            <td>姓名</td>\\r\\n            <td>{{report.name}}</td>\\r\\n        </tr>\\r\\n        <tr>\\r\\n            <td>性别</td>\\r\\n            <td>{{report.sex}}</td>\\r\\n        </tr>\\r\\n        <tr>\\r\\n            <td>学号</td>\\r\\n            <td>{{report.studNumber}}</td>\\r\\n        </tr>\\r\\n        <tr>\\r\\n            <td>证书号</td>\\r\\n            <td>{{report.certnumber}}</td>\\r\\n        </tr>\\r\\n        <tr>\\r\\n            <td>工种名称</td>\\r\\n            <td>{{report.worktype}}</td>\\r\\n        </tr>\\r\\n        <tr>\\r\\n            <td>申报置换远程教育专业</td>\\r\\n            <td>{{report.major}}</td>\\r\\n        </tr>\\r\\n        <tr>\\r\\n            <td>可置换专业层次</td>\\r\\n            <td>{{report.applEduLvl}}</td>\\r\\n        </tr>\\r\\n        <tr>\\r\\n            <td>申请时间</td>\\r\\n            <td>{{report.appliedDate}}</td>\\r\\n        </tr>\\r\\n\\r\\n    </table>\\r\\n\\r\\n    <button class=\\\"btn btn-lg btn-primary ca-btn-print\\\" ng-click=\\\"print()\\\">打印报告</button>\\r\\n\\r\\n</div>\");\n$templateCache.put(\"views/step1.html\",\"<div class=\\\"intro\\\">\\r\\n    <p>在递交《机械行业职业资格证书置换北京理工大学远程教育学分申请》前，申请者需认真阅读置换范围及办法，如实填写个人真实信息，并严格按照要求进行申请</p>\\r\\n    <p class=\\\"text-warning\\\">若您已经申请成功，想查看申请结果，请重新输入申请信息</p>\\r\\n    <p>官方咨询电话：400-890-0161</p>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"link-extra-info\\\">\\r\\n    <a class=\\\"btn btn-default\\\" ng-repeat=\\\"meta in articlesMetaData\\\" ng-click=\\\"open(meta.slug)\\\">{{meta.title}}</a>\\r\\n</div>\\r\\n<button ng-click=\\\"start()\\\" class=\\\"btn btn-lg btn-primary \\\">开始申请</button>\");\n$templateCache.put(\"views/step2.html\",\"<div class=\\\"rechoose\\\" ng-show=\\\"ca.updating\\\">请重选你的专业</div>\\r\\n\\r\\n<!-- TODO: use some kind of custom directive, instead of these junk -->\\r\\n<form class=\\\"form-horizontal credit-apply\\\" role=\\\"form\\\" name=\\\"caForm\\\" ng-submit=\\\"submit()\\\" novalidate>\\r\\n    <div class=\\\"form-group\\\">\\r\\n        <label for=\\\"name\\\" class=\\\"col-sm-3 control-label\\\">姓名</label>\\r\\n        <div class=\\\"col-sm-7\\\">\\r\\n            <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"name\\\" ng-model=\\\"ca.cert.name\\\" name=\\\"name\\\" required>\\r\\n        </div>\\r\\n        <div class=\\\"text-danger col-sm-2 form-control-static\\\" gf-form-error=\\\"name\\\"></div>\\r\\n    </div>\\r\\n    <div class=\\\"form-group\\\">\\r\\n        <label for=\\\"idnumber\\\" class=\\\"col-sm-3 control-label\\\">身份证号</label>\\r\\n        <div class=\\\"col-sm-7\\\">\\r\\n            <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"idnumber\\\" ng-model=\\\"ca.cert.idnumber\\\" name=\\\"idnumber\\\" required>\\r\\n        </div>\\r\\n        <div class=\\\"text-danger col-sm-2 form-control-static\\\" gf-form-error=\\\"idnumber\\\"></div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"form-group\\\">\\r\\n        <label for=\\\"certnumber\\\" class=\\\"col-sm-3 control-label no-wrap\\\">职业资格证书号</label>\\r\\n        <div class=\\\"col-sm-7\\\">\\r\\n            <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"certnumber\\\" ng-model=\\\"ca.cert.certnumber\\\" name=\\\"certnumber\\\" required>\\r\\n        </div>\\r\\n        <div class=\\\"text-danger col-sm-2 form-control-static\\\" gf-form-error=\\\"certnumber\\\"></div>\\r\\n    </div>\\r\\n    \\r\\n    <div class=\\\"form-group\\\">\\r\\n        <label for=\\\"studNumber\\\" class=\\\"col-sm-3 control-label no-wrap\\\">北理工入学学号</label>\\r\\n        <div class=\\\"col-sm-7\\\">\\r\\n            <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"studNumber\\\" ng-model=\\\"ca.studNumber\\\" name=\\\"studNumber\\\" required stud-number>\\r\\n        </div>\\r\\n        <div class=\\\"text-danger col-sm-2 form-control-static\\\" gf-form-error=\\\"studNumber\\\"></div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"form-group\\\">\\r\\n        <label for=\\\"major\\\" class=\\\"col-sm-3 control-label no-wrap\\\">选择申报专业</label>\\r\\n        <div class=\\\"col-sm-7\\\">\\r\\n            <select id=\\\"major\\\" class=\\\"form-control\\\" ng-model=\\\"ca.majorId\\\" ng-options=\\\"major._id as major.name for major in majors\\\" required name=\\\"majorId\\\">\\r\\n                <option value=\\\"\\\">请选择专业</option>\\r\\n            </select>\\r\\n        </div>\\r\\n        <div class=\\\"text-danger col-sm-2 form-control-static\\\" gf-form-error=\\\"majorId\\\"></div>\\r\\n\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"form-group\\\">\\r\\n        <div class=\\\"col-sm-offset-3 col-sm-7 btn-container\\\">\\r\\n            <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"submitting\\\">提交</button>\\r\\n            <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-click=\\\"back()\\\">返回</button>\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n    \\r\\n</form>\");\n$templateCache.put(\"views/step3.html\",\"<div ng-if=\\\"redirect\\\">\\r\\n\t<span>无法显示结果，请先进行申请</span>\\r\\n\t<br/>\\r\\n\t<span countdown=\\\"3\\\" count-end=\\\"redirect()\\\" class=\\\"countdown\\\"></span>\\r\\n\t<span>秒后为您跳转</span>\\r\\n</div>\\r\\n\\r\\n\\r\\n<div ng-if=\\\"!redirect && success\\\">\\r\\n    <div class=\\\"appl-result\\\">\\r\\n        <div class=\\\"success-info\\\">\\r\\n            <div class=\\\"alert alert-success\\\" ng-show=\\\"!hasApplied\\\">申请成功</div>\\r\\n\\r\\n            <div ng-show=\\\"hasApplied\\\" class=\\\"alert alert-warning\\\">您已于{{appliedTime}}申请成功，请不要再次申请。您之前的申请记录为：\\r\\n            </div>\\r\\n        </div>\\r\\n\\r\\n        <p>\\r\\n            您已通过机械工业职业技能鉴定指导中心针对机械行业职业资格证书置换北理工远程教育专业学分资质认证审核，请打印认证书并携带至北京理工大学远程教育各学习中心报名。\\r\\n        </p>\\r\\n\\r\\n        <div ng-include=\\\"\\'views/report.html\\'\\\"></div>\\r\\n\\r\\n        <p class=\\\"change-major\\\">如果您申报错了专业，请\\r\\n            <button class=\\\"btn btn-sm btn-default\\\" ng-click=\\\"rechooseMajor()\\\">重新选择专业</button>\\r\\n        </p>\\r\\n    </div>\\r\\n\\r\\n</div>\\r\\n\\r\\n\\r\\n<div ng-if=\\\"!redirect&&!success\\\">\\r\\n    <div class=\\\"appl-result\\\">\\r\\n        <div class=\\\"alert alert-danger\\\">对不起，审核未通过。未通过原因：</div>\\r\\n\\r\\n        <div ng-show=\\\"reason==\\'0\\'\\\">请检查你的填写信息以及网络，若不是您的问题，请联系我们</div>\\r\\n\\r\\n        <div ng-show=\\\"reason==\\'1\\'\\\">您未取得机械行业职业资格证书，请获取证书后再进行申报</div>\\r\\n\\r\\n        <div ng-show=\\\"reason==\\'2\\'\\\">您申报的职业工种与所置换的远程教育专业不匹配，请仔细阅读步骤一中的学分置换范围及置换办法后再申报</div>\\r\\n        <div ng-show=\\\"reason==\\'3\\'\\\">您的职业资格证书级别暂不符合置换范围，请取得三级（高级）及以上级别再申请。详见步骤一中的学分置换范围及置换办法</div>\\r\\n\\r\\n\\r\\n    </div>\\r\\n\\r\\n\\r\\n    <button ng-click=\\\"reapply()\\\" class=\\\"btn btn-lg btn-primary\\\">重新申请</button>\\r\\n</div>\\r\\n\");\n$templateCache.put(\"views/success.html\",\"<div class=\\\"appl-result\\\">\\r\\n\t<div class=\\\"success-info\\\">\\r\\n\t    <div class=\\\"alert alert-success\\\" ng-show=\\\"!result.hasApplied\\\">申请成功</div>\\r\\n\\r\\n\t\t<div ng-show=\\\"hasApplied\\\" class=\\\"alert alert-warning\\\">您已于{{result.appliedTime}}申请成功，请不要再次申请。您之前的申请记录为：\\r\\n\t\t</div>\t\t\\r\\n\t</div>\\r\\n\\r\\n    <p>\\r\\n        您已通过机械工业职业技能鉴定指导中心针对机械行业职业资格证书置换北理工远程教育专业学分资质认证审核，请打印认证书并携带至北京理工大学远程教育各学习中心报名。\\r\\n    </p>\\r\\n\\r\\n    <div ng-include=\\\"\\'views/report.html\\'\\\"></div>\\r\\n\\r\\n    <p class=\\\"change-major\\\">如果您申报错了专业，请\\r\\n\t\t<button class=\\\"btn btn-sm btn-default\\\" ng-click=\\\"restart(true)\\\">重新选择专业</button>\\r\\n    </p>\\r\\n</div>\\r\\n\");}]);"],"sourceRoot":"/source/"}