function getErrorMsg(e){return e.required?"必填":e.equals?"两次输入不一致":e.minlength?"字符太少":e.maxlength?"字符太多":void 0}function selectElementText(e,n){n=n||window;var r,t,s=n.document;n.getSelection&&s.createRange?(r=n.getSelection(),t=s.createRange(),t.selectNodeContents(e),r.removeAllRanges(),r.addRange(t)):s.body.createTextRange&&(t=s.body.createTextRange(),t.moveToElementText(e),t.select())}var MessageModule=angular.module("message",[]);MessageModule.factory("MessageApi",["$timeout","$rootScope",function(e){var n=2e3;return{status:null,message:null,show:!1,hasChanged:function(){var e=this._changed;return this._changed=!1,e},progress:function(e){this._clearPrevTimeout(),this.status="info",this.message=e||"操作中，请稍候",this.show=!0,this._changed=!0},success:function(e){this._clearPrevTimeout(),this._timeout(),this.status="success",this.message=e||"操作成功",this.show=!0,this._changed=!0},error:function(e){this.show=!1,this._changed=!0;var n="操作失败";alert(e||n)},finish:function(){var e=this;e.show=!1,this._changed=!0},_timeout:function(r){r=r||n;var t=this;this.timeoutPromise=e(function(){t.finish()},r)},_clearPrevTimeout:function(){this.timeoutPromise&&(e.cancel(this.timeoutPromise),this.timeoutPromise=null)}}}]),MessageModule.directive("message",["MessageApi","$timeout","$animate",function(e,n,r){return!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";.gmessage-hide{display:none!important}.gmessage-hide-add-active,.gmessage-hide-remove{display:inline!important}.gmessage-hide-remove{-webkit-animation:expand .7s ease-out;animation:expand .7s ease-out}.gmessage-hide.gmessage-hide-add{-webkit-animation:fadeOut 1s;animation:fadeOut 1s}@-webkit-keyframes fadeOut{from{opacity:1}to{opacity:0}}@keyframes fadeOut{from{opacity:1}to{opacity:0}}@-webkit-keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@-webkit-keyframes expand{50%{-webkit-transform:scale(1.08);transform:scale(1.08)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes expand{50%{-webkit-transform:scale(1.08);transform:scale(1.08)}to{-webkit-transform:scale(1);transform:scale(1)}}</style>'),{restrict:"AE",scope:{},replace:!0,link:function(n,t){n.api=e,n.$watch(function(){return e.hasChanged()},function(n,s){(n||n===s)&&(r.addClass(t,"gmessage-hide"),e.show&&r.removeClass(t,"gmessage-hide"))})},template:'<span class="label label-{{api.status}} gf-message">{{api.message}}</span>'}}]).directive("spinner",["$http",function(e){return{restrict:"EA",scope:{},replace:!0,template:'<span class="spinner"><img ng-show="spinnerVisible" src="/img/ajax-loader.gif" width="20" height="20" /></span>',link:function(n,r){r.children("img");n.$watch(function(){return e.pendingRequests.length>0},function(e){n.spinnerVisible=e?!0:!1})}}}]),angular.module("misc",[]).directive("gfEnter",function(){return function(e,n,r){n.bind("keypress",function(t){13===t.keyCode&&(e.$apply(function(){e.$eval(r.gfEnter,{event:t})}),t.preventDefault(),n[0].blur())})}}).directive("gfEscape",function(){return function(e,n,r){n.bind("keyup",function(t){27===t.keyCode&&(e.$apply(function(){e.$eval(r.gfEscape,{event:t})}),t.preventDefault(),n[0].blur())})}}).directive("focusMe",["$timeout","$parse",function(e,n){return{link:function(r,t,s){var o=n(s.focusMe);r.$watch(o,function(n){n===!0&&e(function(){t[0].focus()})}),t.bind("blur",function(){r.$apply(o.assign(r,!1))})}}}]).directive("autoFocus",["$timeout",function(e){return{restrict:"AC",link:function(n,r){e(function(){r[0].focus()},500)}}}]).directive("equals",function(){return{restrict:"A",require:"?ngModel",link:function(e,n,r,t){if(t){e.$watch(r.ngModel,function(){s()}),r.$observe("equals",function(){s()});var s=function(){var e=t.$viewValue,n=r.equals;t.$setValidity("equals",!e||!n||e===n)}}}}}).directive("gfVal",function(){return{restrict:"A",require:"^form",scope:{},link:function(e,n,r,t){var s=r.gfVal,o=t[s];e.$watchCollection(function(){return o.$error},function(n){o.$dirty&&(e.message=getErrorMsg(n))}),e.$watch(function(){return o.$dirty},function(n){n&&(e.message=getErrorMsg(o.$error))})},template:"<span>{{message}}</span>"}}),angular.module("liveCreate",[]).directive("liveCreate",function(){return{restrict:"EA",transclude:!0,link:function(e,n,r){function t(){angular.extend(e.myModel,e.oldModel),e.myModel._isNew=!1}var s=n.find("input")[0];e.myModel._isNew&&s.focus(),e.hasChild=angular.isDefined(r.hasChild),e.someFn=function(){var n={};n[r.myModel]=e.myModel,n.cb=function(n,t){return n?e.removeFromDom():(angular.extend(e.myModel,t[r.myModel]),void(e.myModel._isNew=!1))},e.upsert(n)},e.remove=function(){var n=confirm("确定要删除么？");n&&e.removeFn()},e.cancel=function(){return e.myModel._id?void t():void e.removeFromDom()},e.edit=function(){e.myModel._isNew=!0,e.oldModel=angular.copy(e.myModel)}},scope:{myModel:"=",modelName:"@",upsert:"&",removeFn:"&",addChild:"&",myPlaceholder:"@",myClass:"@",removeFromDom:"&",mode:"@"},templateUrl:"templates/major.html"}});var app=angular.module("myApp",["taiPlaceholder","message","misc","liveCreate","ui.bootstrap","angularLoad","ngSanitize","ngAnimate"]).config(["$httpProvider",function(e){e.interceptors.push(["$q","MessageApi",function(e,n){function r(e){var n=e&&e.data&&e.data.message;return n}return{response:function(t){if(t.data&&t.data.success===!1){var s=r(t);return s&&!t.config.mute&&n.error(s),e.reject(t)}return t},responseError:function(t){var s=r(t);return s&&n.error(s),e.reject(t)}}}])}]).controller("appCtrl",["$scope","$http","$modal","MessageApi","$timeout",function(e,n,r,t,s){function o(){e.tabs=[{title:"专业和工种管理",url:"views/major-and-work-type.html"},{title:"申请结果查询",url:"views/ca-results.html"},{title:"系统帐号管理",url:"views/sys-account.html"},{title:"展示信息编辑",url:"views/editor.html"}],"crapSubMgr"==e.role&&(e.tabs=[e.tabs[1]]),e.currentTab=e.tabs[0]}function a(){e.tabs=null,delete e.currentTab}function i(){n.post("isLogged").success(function(n){n.logged?(e.logged=n.logged,e.role=n.role):e.openLogin()})}e.testMessage=function(){t.success("hey!")},e.$on("freeze",function(n,r){e.freezed=r}),e.onClickTab=function(n){e.currentTab=n},e.isActive=function(n){return e.currentTab?n.url==e.currentTab.url:!1},e.openLogin=function(){r.open({templateUrl:"views/login.html",controller:"loginCtrl",size:"sm",backdrop:!1,windowClass:"login-modal"}).result.then(function(n){e.logged=!0,e.role=n.role,t.success("登录成功")},function(){})},e.logout=function(){n.post("logout").success(function(n){n.success&&(e.logged=!1,delete e.role,t.success("成功退出"),s(a,500))})},e.$watch("logged",function(e){e&&o()}),i()}]);angular.module("myApp").controller("mwCtrl",["$scope","$http","MessageApi","$log","$modal",function(e,n,r,t,s){var o;n.get("majors",{mute:!0}).success(function(n){o=e.majors=n.majors,e.hasListed=!0}),e.addMajor=function(){o.unshift({name:"",_isNew:!0})},e.addWT=function(e){e.workTypes.push({_isNew:!0})},e.upsertMajor=function(e,t){var s;s=e._id?n.put("major/"+e._id,{major:e}):n.post("major",{major:e}),s.success(function(e){e.success&&r.success("操作成功"),t(null,e)}).error(function(e){t("fail",e)})},e.removeMajor=function(t,a){s.open({templateUrl:"views/delete-major.modal.html",controller:"delMajorCtrl",backdrop:"static",backdropClass:"try"}).result.then(function(s){var i="major/"+t._id+(s?"/"+s:"");n["delete"](i).success(function(n){n.success&&r.success("操作成功"),e.rmFromCollection(o,a)})})},e.removeWT=function(t,s,o){var a=confirm("符合该专业和该工种的所有申请者信息将被删除，是否继续？");a&&n.post("work-type/delete",{majorId:t._id,workType:s,delAppl:!0}).success(function(n){n.success&&r.success("操作成功"),e.rmFromCollection(t.workTypes,o)})},e.rmFromCollection=function(e,n){e.splice(n,1)},e.createWT=function(e,t,s){n.post("work-type",{majorId:e,workType:t}).success(function(e){s(null,e),r.success("操作成功")}).error(function(e){s("fail",e)})}}]).controller("delMajorCtrl",["$scope","$modalInstance",function(e,n){e.delAppl="yes",e.ok=function(){n.close(e.delAppl)},e.cancel=function(){n.dismiss()}}]);var app=angular.module("myApp");app.controller("loginCtrl",["$scope","$modalInstance","$http","MessageApi",function(e,n,r){var t="login";e.user={},e.ok=function(){r.post(t,{user:e.user}).success(function(e){e.success&&n.close(e.user)})},e.cancel=function(){n.dismiss()}}]),app.controller("userCtrl",["$scope","$http","$modal","MessageApi",function(e,n,r,t){function s(){n.get("users",{mute:!0}).success(function(n){e.users=n.users})}e.users=[],e.upsert=function(n){var s=n?"编辑成功":"添加成功";r.open({templateUrl:"views/upsert-user.html",controller:"userUpsertCtrl",resolve:{user:function(){return angular.copy(n)}},backdrop:"static"}).result.then(function(r){t.success(s),n?angular.extend(n,r.user):e.users.unshift(r.user)},function(){})},e.remove=function(r){var s=confirm("确定删除么");s&&n["delete"]("users/"+r._id).success(function(){t.success("删除成功"),e.users.splice(e.users.indexOf(r),1)})},s()}]),app.controller("userUpsertCtrl",["$scope","$modalInstance","$http","user",function(e,n,r,t){var s=t?!0:!1,o=t?"put":"post",a=t?"users/"+t._id:"users";e.user=t||{},e.editing=s,e.ok=function(){r[o](a,{user:e.user}).success(function(e){n.close(e)})},e.cancel=function(){n.dismiss()}}]),angular.module("myApp").controller("resultCtrl",["$scope","$http","$log","MessageApi",function(e,n,r,t){function s(n,r){var t=angular.extend({},n);return r&&(t.page=r.page||1,t.limit=r.limit||e.pagination.itemsPerPage),angular.forEach(t,function(e,n){e||0===e||delete this[n]},t),t.ts=+new Date,t}function o(n){o._count=(o._count||0)+1;var r=[];return angular.forEach(n,function(e){e.selected&&r.push(e._id)}),e.selectedIds=r,r}function a(){n.get("majors").success(function(n){e.majors=n.majors}),n.get("work-types").success(function(n){e.workTypes=n.workTypes}),e.find(e.criteria,1,!0)}var i;e.pagination={currentPage:1,itemsPerPage:10,maxSize:5},e.$watch("searching",function(e){e?t.progress("查找中.."):t.finish()}),e.download=function(){function n(e){var n,r=[];return angular.forEach(e,function(e,n){r.push(n+"="+encodeURIComponent(e))}),n=r.length?"?"+r.join("&"):""}var r=n(s(i));e.dlUrl="ca-results/to-excel"+r,t.success("即将开始下载..")},e.find=function(r,t,o){r=angular.copy(r),n.get("ca-results",{params:s(r,{page:t}),mute:o}).success(function(n){e.results=n.results,e.pagination.total=n.total,i=r,e.searching=!1}).error(function(){e.searching=!1}),e.searching=!0},e.remove=function(){var r=o(e.results),s=confirm("确定要删除这"+r.length+"项么");if(s&&e.selectedIds.length){var a=angular.copy(r);n.post("ca-results",{ids:e.selectedIds},{headers:{"X-HTTP-Method-Override":"DELETE"}}).success(function(n){if(n.success){t.success("删除成功");for(var r=e.results.length;r--;)~a.indexOf(e.results[r]._id)&&e.results.splice(r,1)}})}},e.pageChanged=function(){e.find(i,e.pagination.currentPage)},e.datepicker={formats:["yyyy-MM-dd"],options:{startingDay:1,showWeeks:!1}},e.openDatepicker=function(n,r){n.preventDefault(),n.stopPropagation(),e.datepicker[r]=e.datepicker[r]||{},e.datepicker[r].opened=!0},e.$watch("allSelected",function(n,r){n!==r&&angular.forEach(e.results,function(e){e.selected=n})}),e.$watch(function(){return o(e.results).length},function(n,r){return n!==r?0===n?void(e.allSelected=!1):void(n===e.results.length&&(e.allSelected=!0)):void 0}),a()}]),function(){"use strict";angular.module("angularLoad",[]).service("angularLoad",["$document","$q","$timeout","$cacheFactory",function(e,n,r,t){var s=t("angularLoad");this.loadScript=function(t){var o=n.defer(),a=s.get(t);if(a)return a;s.put(t,o.promise);var i=e[0].createElement("script");return i.onload=i.onreadystatechange=function(e){(e||"loaded"==i.readyState)&&r(function(){o.resolve(e)})},i.onerror=function(e){r(function(){o.reject(e),s.remove(t)})},i.src=t,e[0].body.appendChild(i),o.promise},this.loadCSS=function(t){var s=n.defer(),o=e[0].createElement("link");return o.rel="stylesheet",o.type="text/css",o.href=t,o.onload=o.onreadystatechange=function(e){r(function(){s.resolve(e)})},o.onerror=function(e){r(function(){s.reject(e)})},e[0].head.appendChild(o),s.promise}}])}();var app=angular.module("myApp");app.factory("ArticleMgr",["$cacheFactory",function(e){var n=e("articles");return n.put("readme",{slug:"readme",url:"../articles/readme"}),n.put("help",{slug:"help",url:"../articles/help"}),n.put("center",{slug:"center",url:"../articles/center"}),n}]),app.controller("editorCtrl",["$scope","$http","MessageApi","angularLoad","$timeout","$q","$modal","$sce",function(e,n,r,t,s,o,a,i){function l(r){var t=n.get("articles/"+u[r]+"?ts="+ +new Date);o.all([c,t]).then(function(n){e.articles[r]=n[1].data.article,n[1].data.article||(e.articles[r]={_new:!0});var t=tinymce.get(r);t&&t.destroy(),tinymce.init({selector:"#"+r,height:400,theme:"modern",content_css:["../../vendors/bootstrap-3.2.0-dist/css/bootstrap.min.css","css/ca.admin.css"],plugins:["advlist autolink lists link image hr","code","table contextmenu","paste textcolor colorpicker"],toolbar1:"insertfile undo redo paste pastetext | styleselect removeformat | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | code",toolbar2:"fontselect fontsizeselect bold italic | forecolor backcolor | table link image hr",table_default_styles:{},table_class_list:[{title:"无",value:""},{title:"内间距",value:"mce-table-style-padding"},{title:"居中",value:"mce-table-style-center"}],contextmenu:"link image inserttable | tableprops cell row column deletetable",language:"zh_CN",menubar:!1,statusbar:!1,fontsize_formats:"8pt 9pt 10pt 11pt 12pt 13pt 14pt 15pt 16pt 18pt 20pt 24pt 36pt",setup:function(n){n.on("init",function(){s(function(){e.$emit("freeze",!1)}),e.articles[r]&&n.setContent(e.articles[r].content||"")})},font_formats:"楷体=KaiTi,KaiTi_GB2312;宋体=SimSun,FangSong,FangSong_GB2312;微软雅黑=Microsoft YaHei;黑体=SimHei;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;"})})}var c=t.loadScript("vendors/tinymce/tinymce.min.js");e.articles={};var u={readme:"readme",help:"help",center:"center"};e.$on("freeze",function(n,r){e.freezed=r}),e.selectTab=function(n){e.$emit("freeze",!0),l(n)},e.submit=function(t){var s=e.articles[t];s.content=tinymce.get(t).getContent();var o;s._new?(s.slug=u[t],o=n.post("articles",s)):o=n.put("articles/"+u[t],s),o.success(function(n){r.success("保存成功"),e.articles[t]=n.article})},e.preview=function(n){a.open({templateUrl:"../views/article.modal.html",controller:["$scope","$modalInstance","article",function(e,n,r){e.article=r,e.ok=function(){n.close()},e.cancel=function(){n.dismiss("cancel")}}],size:"lg",resolve:{article:function(){var r=e.articles[n],t=tinymce.get(n).getContent();return r.content=i.trustAsHtml(t),r}}})}}]),angular.module("myApp").run(["$templateCache",function(e){e.put("templates/live-edit.html",""),e.put("templates/major.html",'<div class="{{myClass}}">\r\n    <input type="text" ng-model="myModel.name" ng-show="myModel._isNew" placeholder={{myPlaceholder||\'输入名称\'}} gf-enter="someFn()" gf-escape="cancel()">\r\n    <div class="btn-group" ng-show="myModel._isNew">\r\n	    <button type="button" class="btn btn-primary" ng-click="someFn()" ng-disabled="!myModel.name">\r\n	      	<span class="glyphicon glyphicon-ok" aria-hidden="true"></span>\r\n	    </button>\r\n	    <button type="button" class="btn btn-primary"  ng-click="cancel()">\r\n	      	<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>\r\n	    </button>\r\n    </div>\r\n\r\n\r\n    <span ng-hide="myModel._isNew" class="name" title="{{myModel.name}}">{{myModel.name}}</span>\r\n\r\n\r\n	<button type="button" ng-click="remove()" ng-show="mode==\'simple\'&&!myModel._isNew" class="close btn-remove">\r\n	    <span>&times</span>\r\n	</button>\r\n\r\n	<div class="btn-toolbar" ng-show="mode!=\'simple\'">\r\n		\r\n	    <div class="btn-group" ng-hide="myModel._isNew">\r\n			<button type="button" class="btn btn-default btn-sm" ng-click="edit()">编辑</button>\r\n			<button type="button" class="btn btn-default btn-sm" ng-click="remove()">删除</button>\r\n		</div>\r\n		<div class="btn-group"> \r\n	    	<button class="btn btn-primary btn-sm" ng-click="addChild(myModel)" ng-hide="myModel._isNew|| !hasChild">添加工种</button>\r\n    	</div>\r\n	</div>\r\n    \r\n</div>\r\n\r\n<div ng-transclude></div>'),e.put("views/ca-results.html",'<div ng-controller="resultCtrl">\r\n    <div class="control-panel">\r\n        <form class="form-inline" ng-submit="find(criteria)">\r\n            <div class="form-group">\r\n                <label class="sr-only" for="crapId">认证编号</label>\r\n                <input class="form-control" id="crapId" placeholder="认证编号" ng-model="criteria._id">\r\n            </div>\r\n            <div class="form-group">\r\n                <label class="sr-only" for="certnumber">证书号</label>\r\n                <input class="form-control" id="certnumber" placeholder="证书号" ng-model="criteria.certnumber">\r\n            </div>\r\n\r\n            <div class="form-group">\r\n                <label class="sr-only" for="idnumber">身份证号</label>\r\n                <input class="form-control" id="idnumber" placeholder="身份证号" ng-model="criteria.idnumber">\r\n            </div>\r\n            <div class="form-group">\r\n                <label class="sr-only" for="name">姓名</label>\r\n                <input class="form-control name" id="name" placeholder="姓名" ng-model="criteria.name">\r\n            </div>\r\n            <div class="form-group">\r\n                <label class="sr-only" for="studNumber">学号</label>\r\n                <input class="form-control" id="studNumber" placeholder="学号" ng-model="criteria.studNumber">\r\n            </div>\r\n            <div class="form-group">\r\n                <select id="major" class="form-control" ng-model="criteria.major" ng-options="major._id as major.name for major in majors">\r\n                    <option value="">选择专业</option>\r\n                </select>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- sometimes worktype not using camelCase is due to my poor db design-->\r\n                <select class="form-control" ng-model="criteria.worktype" ng-options="workType.name as workType.name for workType in workTypes">\r\n                    <option value="">选择工种</option>\r\n                </select>\r\n            </div>\r\n\r\n\r\n            <div class="form-group">\r\n                <label class="sr-only">日期</label>\r\n                <div class="input-group">\r\n                    <input type="text" class="form-control from" ng-model="criteria.from" datepicker-popup is-open="datepicker.from.opened" datepicker-options="datepicker.options" placeholder="默认2014-12-01" />\r\n                    <span class="input-group-btn">\r\n                        <a class="btn btn-default" ng-click="openDatepicker($event, \'from\')"><i class="glyphicon glyphicon-calendar"></i>\r\n                        </a>\r\n                    </span>\r\n                </div>\r\n                <span class="control-label to">至</span>\r\n                <div class="input-group ">\r\n                    <input type="text" class="form-control to" ng-model="criteria.to" datepicker-popup is-open="datepicker.to.opened" datepicker-options="datepicker.options" placeholder="默认今天" />\r\n                    <span class="input-group-btn">\r\n                        <a class="btn btn-default" ng-click="openDatepicker($event, \'to\')"><i class="glyphicon glyphicon-calendar"></i>\r\n                        </a>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            \r\n\r\n            <div class="form-group">\r\n                <input type="submit" class="btn btn-primary" value="查找" ng-disabled="searching">\r\n                <a class="btn btn-primary" href="" download ng-click="download($event)" ng-href="{{dlUrl}}">导出</a>\r\n                <button type="button" class="btn btn-primary" ng-disabled="!selectedIds.length" ng-click="remove()">删除</button>\r\n            </div>\r\n\r\n            <div class="form-group fuzzy">\r\n                <label tooltip="开启后搜索速度可能较慢，请耐心等待">\r\n                    <input type="checkbox" ng-model="criteria.fuzzy">模糊搜索\r\n                </label>\r\n\r\n            </div>\r\n\r\n\r\n        </form>\r\n\r\n    </div>\r\n    <div class="table-responsive ca-results">\r\n        <table class="table table-bordered table-hover text-center">\r\n            <thead>\r\n                <tr>\r\n                    <th>\r\n                        <label><input type="checkbox" ng-model="allSelected">全选</label>\r\n                    </th>\r\n                    <th class="text-center">认证编号</th>\r\n                    <th class="text-center">姓名</th>\r\n                    <th class="text-center">身份证号</th>\r\n\r\n                    <th class="text-center">证书号</th>\r\n                    <th class="text-center">工种</th>\r\n                    <th class="text-center">学号</th>\r\n\r\n                    <th class="text-center">可置换专业层次</th>\r\n                    <th class="text-center">申报专业</th>\r\n                    <th class="text-center">申报日期</th>\r\n                    \r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr ng-repeat="result in results">\r\n                    <td>\r\n                        <input type="checkbox" ng-model="result.selected">\r\n                    </td>\r\n                    <td>{{result._id}}</td>\r\n                    <td>{{result.name}}</td>\r\n                    <td>{{result.idnumber}}</td>\r\n                    <td>{{result.certnumber}}</td>\r\n                    <td>{{result.worktype}}</td>\r\n                    <td>{{result.studNumber}}</td>\r\n                    <td>{{result.applEduLvl}}</td>\r\n                    <td>{{result.major}}</td>\r\n                    <td>{{result.appliedDate}}</td>\r\n                    \r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n    <div class="pagin">\r\n        <pagination total-items="pagination.total" ng-model="pagination.currentPage" items-per-page="pagination.itemsPerPage" class="pagination-sm" boundary-links="true" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;" ng-change="pageChanged()" max-size="pagination.maxSize" num-pages="pagination.numPages">\r\n        </pagination>\r\n\r\n        <span class="pager-info label label-primary">共{{pagination.total}}条目，{{pagination.numPages}}页</span>\r\n    </div>\r\n\r\n\r\n</div>\r\n'),e.put("views/delete-major.modal.html",'<div class="modal-body">\r\n<form>\r\n    <label class="radio-inline">\r\n        <input type="radio" ng-model="delAppl" value="yes"> 删除该专业下所有申请信息\r\n    </label>\r\n    <label class="radio-inline">\r\n        <input type="radio" ng-model="delAppl" value=""> 保留申请信息（将会造成信息混乱，不推荐）\r\n    </label>\r\n    \r\n</form>\r\n</div>\r\n\r\n<div class="modal-footer">\r\n    <button class="btn btn-primary" ng-click="ok()">删除</button>\r\n    <button class="btn btn-primary" ng-click="cancel()">取消</button>\r\n</div>\r\n'),e.put("views/editor.html",'<div ng-controller="editorCtrl">\r\n\r\n    <div tabset>\r\n        <div tab heading="学分制换办法" select="selectTab(\'readme\')">\r\n\r\n            <form ng-submit="submit(\'readme\')">\r\n                <div class="form-group">\r\n                    <label>标题(按钮):</label>\r\n                    <input type="text" ng-model="articles.readme.title">\r\n                </div>\r\n                <div class="form-group">\r\n                    <label>次序</label>\r\n                    <select ng-options="o for o in [1,2,3]" ng-model="articles.readme.order">                   \r\n                        \r\n                    </select>\r\n                </div>\r\n                <textarea name="content" style="width:100%;" id="readme"></textarea>\r\n                <input type="submit" class="btn btn-primary" ng-disabled="freezed" value="保存">\r\n                <button type="button" class="btn btn-primary" ng-click="preview(\'readme\')">预览</button>\r\n            </form>\r\n\r\n        </div>\r\n\r\n        <div tab select="selectTab(\'help\')">\r\n            <tab-heading>我要帮助</tab-heading>\r\n            <form ng-submit="submit(\'help\')">\r\n                <div class="form-group">\r\n                    <label>标题(按钮):</label>\r\n                    <input type="text" ng-model="articles.help.title">\r\n                </div>\r\n                <div class="form-group">\r\n                    <label>次序</label>\r\n                    <select ng-options="o for o in [1,2,3]" ng-model="articles.help.order">\r\n                        \r\n                    </select>\r\n                </div>\r\n                <textarea name="content" style="width:100%;" id="help"></textarea>\r\n                <input type="submit" class="btn btn-primary" ng-disabled="freezed" value="保存">\r\n                <button type="button" class="btn btn-primary" ng-click="preview(\'help\')">预览</button>\r\n            </form>\r\n        </div>\r\n\r\n        <div tab heading="学习中心" select="selectTab(\'center\')">\r\n\r\n            <form ng-submit="submit(\'center\')">\r\n                <div class="form-group">\r\n                    <label>标题(按钮):</label>\r\n                    <input type="text" ng-model="articles.center.title">\r\n                </div>\r\n                <div class="form-group">\r\n                    <select ng-options="o for o in [1,2,3]" ng-model="articles.center.order">\r\n                        \r\n                    </select>\r\n                </div>\r\n                \r\n                <textarea name="content" id="center" style="width:100%;"></textarea>\r\n\r\n                <input type="submit" class="btn btn-primary" ng-disabled="freezed" value="保存">\r\n                <button type="button" class="btn btn-primary" ng-click="preview(\'center\')">预览</button>\r\n\r\n            </form>\r\n\r\n        </div>\r\n    </div>\r\n\r\n\r\n</div>\r\n'),e.put("views/err-msgs.html",'<div ng-message="required">必填</div>\r\n<div ng-message="minlength">太短了</div>\r\n<div ng-message="equals">两次输入不一样</div>'),e.put("views/login.html",'<div class="modal-body">\r\n    <form class="form-horizontal" role="form">\r\n        <div class="form-group">\r\n            <label class="col-sm-4 control-label">用户名</label>\r\n            <div class="col-sm-8">\r\n                <input type="text" ng-model="user.name" class="form-control"  gf-enter="ok()" auto-focus>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label class="col-sm-4 control-label">密码</label>\r\n            <div class="col-sm-8">\r\n                <input type="password" ng-model="user.password" class="form-control"  gf-enter="ok()">\r\n            </div>\r\n        </div>\r\n	</form>        \r\n        \r\n</div>\r\n\r\n<div class="modal-footer">\r\n    <button class="btn btn-primary" ng-click="ok()" ng-disabled="!user">登录</button>\r\n    <button class="btn btn-primary" ng-click="cancel()">取消</button>\r\n</div>\r\n'),e.put("views/major-and-work-type.html",'<div ng-controller="mwCtrl" ng-cloak>\r\n    <div class="control-panel">\r\n        <button type="button" class="btn btn-primary" ng-click="addMajor()" ng-disabled="!hasListed">添加专业</button>\r\n    </div>\r\n    <div class="main-panel">\r\n        <div class="major-container">\r\n            <div ng-repeat="major in majors">\r\n                <div live-create my-model="major" upsert="upsertMajor(major, cb)" remove-fn="removeMajor(major, $index, cb)" remove-from-dom="rmFromCollection(majors, $index)" add-child="addWT(major)" has-child my-placeholder="输入专业名称" my-class="major">\r\n                    <div class="wt-container">\r\n\r\n                        <div ng-repeat="workType in major.workTypes">\r\n                            <div live-create mode="simple" my-model="workType" upsert="createWT(major._id, workType, cb)" remove-from-dom="rmFromCollection(major.workTypes, $index)" remove-fn="removeWT(major, workType, $index)" my-placeholder="输入工种名称" my-class="work-type"></div>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n'),e.put("views/sys-account.html",'<div ng-controller="userCtrl">\r\n    <button class="btn btn-primary" ng-click="upsert()">添加子管理员</button>\r\n    <span>子管理员无添加、编辑、删除功能，但可以查看、搜索</span>\r\n    <div class="user-panel">\r\n        <table class="table table-bordered table-hover text-center">\r\n            <thead>\r\n                <tr>\r\n                    <th class="text-center">帐号名</th>\r\n                    <th></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr ng-repeat="user in users">\r\n                    <td>{{user.name}}</td>\r\n                    <td>\r\n                        <button class="btn btn-xs" ng-click="upsert(user)">编辑</button>\r\n                        <button class="btn btn-xs" ng-click="remove(user)">删除</button>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n\r\n        </table>\r\n    </div>\r\n</div>\r\n'),e.put("views/upsert-user.html",'\r\n<div class="modal-header">\r\n    <h2 ng-show="!editing">添加子管理员</h2>\r\n    <h2 ng-show="editing">编辑子管理员</h2>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" role="form" name="userForm">\r\n        <div class="form-group">\r\n            <label class="col-sm-3 control-label">用户名</label>\r\n            <div class="col-sm-6">\r\n                <input type="text" ng-model="user.name" class="form-control" gf-enter="!userForm.$invalid && ok()" auto-focus required name="name">\r\n            </div>\r\n            <!-- <div class="text-danger col-sm-3 form-control-static" ng-show="userForm.name.$invalid && userForm.name.$dirty">\r\n                {{getError(userForm.name)}}\r\n            </div> -->\r\n            <div class="text-danger col-sm-3 form-control-static" gf-val="name" overwrite-msg="{required:" 真的得必填 "}"></div>\r\n            <!-- <div class="text-danger col-sm-3 form-control-static" ng-messages="userForm.name.$touched && userForm.name.$error" ng-messages-include="views/err-msgs.html"></div> -->\r\n        </div>\r\n        <div class="form-group">\r\n            <label class="col-sm-3 control-label">密码</label>\r\n            <div class="col-sm-6">\r\n                <input type="password" ng-model="user.password" class="form-control" gf-enter="!userForm.$invalid && ok()" equals="{{p2}}" name="password" required ng-minlength="6">\r\n            </div>\r\n            <div class="text-danger col-sm-3 form-control-static" gf-val="password">\r\n            </div>\r\n            <!-- <div class="text-danger col-sm-3 form-control-static" ng-messages="userForm.password.$touched && userForm.password.$error" ng-messages-include="views/err-msgs.html"></div> -->\r\n        </div>\r\n        <div class="form-group">\r\n            <label class="col-sm-3 control-label">确认密码</label>\r\n            <div class="col-sm-6">\r\n                <input type="password" ng-model="p2" class="form-control" gf-enter="!userForm.$invalid && ok()" equals="{{user.password}}" name="p2" required>\r\n            </div>\r\n            <div class="text-danger col-sm-3 form-control-static" gf-val="p2"></div>\r\n            \r\n        </div>\r\n    </form>\r\n\r\n</div>\r\n\r\n<div class="modal-footer">\r\n    <button class="btn btn-primary" ng-click="ok()" ng-disabled="userForm.$invalid">{{editing?\'确认\':\'添加\'}}</button>\r\n    <button class="btn btn-primary" ng-click="cancel()">取消</button>\r\n</div>\r\n')}]);
//# sourceMappingURL=../tmp/app-build-b6304eeb.js.map