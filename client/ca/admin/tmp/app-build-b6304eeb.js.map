{"version":3,"sources":["js/modules/misc.module.js","ca/admin/js/mw.ctrl.js","js/modules/message.module.js","ca/admin/js/live-create.module.js","ca/admin/js/ca.admin.js","ca/admin/js/user.ctrl.js","ca/admin/js/result.ctrl.js","ca/admin/js/angular-load.js","ca/admin/js/editor.ctrl.js","ca/admin/js/templates.js"],"names":["getErrorMsg","errors","required","equals","minlength","maxlength","selectElementText","el","win","window","sel","range","doc","document","getSelection","createRange","selectNodeContents","removeAllRanges","addRange","body","createTextRange","moveToElementText","select","MessageModule","angular","module","factory","$timeout","DISPLAY_TIME","status","message","show","hasChanged","tmp","this","_changed","progress","msg","_clearPrevTimeout","success","_timeout","error","defaultMsg","alert","finish","api","duration","timeoutPromise","cancel","directive","MessageApi","$animate","$$csp","element","find","prepend","restrict","scope","replace","link","$watch","changed","oldVal","addClass","removeClass","template","$http","children","pendingRequests","length","hasPending","spinnerVisible","attrs","bind","event","keyCode","$apply","$eval","gfEnter","preventDefault","blur","gfEscape","$parse","model","focusMe","value","focus","assign","_scope","_element","require","elem","ngModel","validate","$observe","val1","$viewValue","val2","$setValidity","formCtrl","fieldName","gfVal","fieldCtrl","$watchCollection","$error","$dirty","val","transclude","cancelEdit","extend","myModel","oldModel","_isNew","input","hasChild","isDefined","someFn","params","cb","err","data","removeFromDom","upsert","remove","c","confirm","removeFn","_id","edit","copy","modelName","addChild","myPlaceholder","myClass","mode","templateUrl","app","config","$httpProvider","interceptors","push","$q","getMessage","res","response","mute","reject","responseError","controller","$scope","$modal","startApp","tabs","title","url","role","currentTab","clearScope","checkLogged","post","logged","openLogin","testMessage","$on","e","freezed","onClickTab","tab","isActive","open","size","backdrop","windowClass","result","then","user","logout","$log","majors","get","hasListed","addMajor","unshift","name","addWT","major","workTypes","upsertMajor","promise","put","removeMajor","index","backdropClass","delAppl","rmFromCollection","removeWT","workType","confirmed","majorId","collection","splice","createWT","$modalInstance","ok","close","dismiss","init","users","successMsg","resolve","indexOf","editing","method","makeParams","criteria","pagin","ret","page","limit","pagination","itemsPerPage","forEach","key","ts","Date","getSelectedIds","items","_count","arr","item","selected","selectedIds","lastCriteria","currentPage","maxSize","download","buildUrl","obj","encodeURIComponent","join","urlPart","dlUrl","results","total","searching","ids","headers","X-HTTP-Method-Override","i","pageChanged","datepicker","formats","options","startingDay","showWeeks","openDatepicker","$event","dir","stopPropagation","opened","newVal","r","allSelected","service","$document","$cacheFactory","cache","loadScript","src","deferred","defer","p","script","createElement","onload","onreadystatechange","readyState","onerror","appendChild","loadCSS","href","style","rel","type","head","slug","angularLoad","$sce","startTinymce","id","articlePromise","slugMap","all","p1","articles","article","_new","inst","tinymce","destroy","selector","height","theme","content_css","plugins","toolbar1","toolbar2","table_default_styles","table_class_list","contextmenu","language","menubar","statusbar","fontsize_formats","setup","editor","on","$emit","setContent","content","font_formats","readme","help","center","selectTab","submit","getContent","preview","trustAsHtml","run","$templateCache"],"mappings":"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","file":"tmp/app-build-b6304eeb.js","sourcesContent":["// http://stackoverflow.com/questions/17470790/how-to-use-a-keypress-event-in-angularjs/17472118#17472118\r\n// also note the comment:\r\n// http://stackoverflow.com/questions/15417125/submit-form-on-pressing-enter-with-angularjs#comment-38317115\r\nangular.module('misc', [])\r\n    .directive('gfEnter', function() {\r\n        return function(scope, element, attrs) {\r\n            element.bind(\"keypress\", function(event) {\r\n\r\n                if (event.keyCode === 13) {\r\n\r\n                    scope.$apply(function() {\r\n                        scope.$eval(attrs.gfEnter, {\r\n                            'event': event\r\n                        });\r\n                    });\r\n                    event.preventDefault();\r\n                    element[0].blur();\r\n                }\r\n            });\r\n        };\r\n    })\r\n    .directive('gfEscape', function() {\r\n        return function(scope, element, attrs) {\r\n            // it is said that keypress is not consistent when press escape key\r\n            element.bind(\"keyup\", function(event) {                \r\n                if (event.keyCode === 27) {\r\n\r\n                    scope.$apply(function() {\r\n                        scope.$eval(attrs.gfEscape, {\r\n                            'event': event\r\n                        });\r\n                    });\r\n                    event.preventDefault();\r\n                    element[0].blur();\r\n                }\r\n            });\r\n        };\r\n    })\r\n    // http://stackoverflow.com/questions/14833326/how-to-set-focus-on-input-field\r\n    .directive('focusMe', [\"$timeout\", \"$parse\", function($timeout, $parse) {\r\n        return {\r\n            //scope: true,   // optionally create a child scope\r\n            link: function(scope, element, attrs) {\r\n\r\n                // gf: I think it's better to use some scope\r\n                // like {model: \"=focusMe\"}\r\n                var model = $parse(attrs.focusMe);\r\n                scope.$watch(model, function(value) {\r\n\r\n                    if (value === true) {\r\n                        $timeout(function() {\r\n                            element[0].focus();\r\n                        });\r\n                    }\r\n                });\r\n                // to address @blesh's comment, set attribute value to 'false'\r\n                // on blur event:\r\n                element.bind('blur', function() {\r\n\r\n                    scope.$apply(model.assign(scope, false));\r\n                });\r\n            }\r\n        };\r\n    }]).directive('autoFocus', [\"$timeout\", function($timeout) {\r\n        return {\r\n            restrict: 'AC',\r\n            link: function(_scope, _element) {\r\n                $timeout(function() {\r\n                    _element[0].focus();\r\n                }, 500);\r\n            }\r\n        };\r\n    }])\r\n    // http://stackoverflow.com/questions/14012239/password-check-directive-in-angularjs\r\n    .directive('equals', function() {\r\n        return {\r\n            restrict: 'A', // only activate on element attribute\r\n            require: '?ngModel', // get a hold of NgModelController\r\n            link: function(scope, elem, attrs, ngModel) {\r\n                if (!ngModel) return; // do nothing if no ng-model\r\n\r\n                // watch own value and re-validate on change\r\n                scope.$watch(attrs.ngModel, function() {\r\n                    validate();\r\n                });\r\n\r\n                // observe the other value and re-validate on change\r\n                attrs.$observe('equals', function(val) {\r\n                    validate();\r\n                });\r\n\r\n                var validate = function() {\r\n                    // values\r\n                    var val1 = ngModel.$viewValue;\r\n                    var val2 = attrs.equals;\r\n\r\n                    // set validity\r\n                    ngModel.$setValidity('equals', !val1 || !val2 || val1 === val2);\r\n                };\r\n            }\r\n        }\r\n    })\r\n// I chose to use the official ngMessages module instead\r\n// but it only works under version 1.3+, so I back here\r\n.directive('gfVal', function() {\r\n    return {\r\n        restrict: \"A\",\r\n        require: \"^form\",\r\n        scope: {},\r\n        link: function(scope, elem, attrs, formCtrl) {\r\n            //ng-show=\"userForm.name.$invalid && userForm.name.$dirty\"\r\n            var fieldName = attrs.gfVal;            \r\n            var fieldCtrl = formCtrl[fieldName];\r\n            \r\n            scope.$watchCollection(function() {\r\n                \r\n                return fieldCtrl.$error\r\n            }, function(errors, oldErrors) {\r\n                \r\n                // was $touched, but 1.2 does not support that attr yet\r\n                if(fieldCtrl.$dirty){\r\n                    scope.message = getErrorMsg(errors);\r\n                }\r\n            })\r\n\r\n            scope.$watch(function() {return fieldCtrl.$dirty;}, function(val, oldVal) {\r\n                \r\n                if(val) scope.message = getErrorMsg(fieldCtrl.$error);\r\n            })\r\n\r\n        },\r\n        template: \"<span>{{message}}</span>\"\r\n    }\r\n\r\n})\r\n\r\n\r\nfunction getErrorMsg(errors) {\r\n    // TODO: figure out a better way to do this\r\n\r\n    if (errors.required) {\r\n        return \"必填\";\r\n    } else if (errors.equals) {\r\n        return \"两次输入不一致\";\r\n    } else if (errors.minlength) {\r\n        return \"字符太少\";\r\n    } else if (errors.maxlength) {\r\n        return \"字符太多\";\r\n    }\r\n\r\n}\r\n","// mw : major and workType\r\nangular.module('myApp')\r\n    .controller('mwCtrl', [\"$scope\", \"$http\", \"MessageApi\", \"$log\", \"$modal\", function($scope, $http, MessageApi, $log, $modal) {\r\n        var majors;\r\n\r\n        $http.get('majors', {\r\n                mute: true\r\n            })\r\n            .success(function(data) {\r\n                majors = $scope.majors = data.majors;\r\n                $scope.hasListed = true;\r\n            })\r\n\r\n        $scope.addMajor = function() {\r\n            majors.unshift({\r\n                name: '',\r\n                _isNew: true\r\n            })\r\n        };\r\n\r\n\r\n        $scope.addWT = function(major) {\r\n\r\n            major.workTypes.push({\r\n                _isNew: true\r\n            })\r\n\r\n        };\r\n\r\n\r\n\r\n        $scope.upsertMajor = function(major, cb) {\r\n            // relative to ca/admin/ca.admin.html\r\n            var promise;\r\n            if (!major._id) {\r\n                promise = $http.post('major', {\r\n                    major: major\r\n                })\r\n            } else {\r\n                promise = $http.put('major/' + major._id, {\r\n                    major: major\r\n                })\r\n            }\r\n\r\n            promise.success(function(data) {\r\n\r\n                    if (data.success) {\r\n                        MessageApi.success('操作成功');\r\n                    }\r\n                    cb(null, data);\r\n                })\r\n                .error(function(data, status) {\r\n\r\n                    cb('fail', data);\r\n                })\r\n        }\r\n\r\n\r\n        $scope.removeMajor = function(major, index) {\r\n            $modal.open({\r\n                    templateUrl: 'views/delete-major.modal.html',\r\n                    controller: 'delMajorCtrl',\r\n                    backdrop: 'static',\r\n                    backdropClass: \"try\"\r\n                })\r\n                .result\r\n                .then(function(delAppl) {\r\n                    var url = 'major' + '/' + major._id + (delAppl ? \"/\" + delAppl : \"\");\r\n                    $http[\"delete\"](url)\r\n                        .success(function(data) {\r\n                            if (data.success) {\r\n                                MessageApi.success('操作成功');\r\n                            }\r\n                            $scope.rmFromCollection(majors, index);\r\n                        })\r\n                });\r\n        }\r\n\r\n        $scope.removeWT = function(major, workType, index) {\r\n            var confirmed = confirm(\"符合该专业和该工种的所有申请者信息将被删除，是否继续？\")\r\n            if(!confirmed) return;\r\n            // the url is relative to ca/admin/ca.admin.html\r\n            // remember it is actually a delete operation\r\n            $http['post']('work-type/delete', {\r\n                    majorId: major._id,\r\n                    workType: workType,\r\n                    delAppl: true\r\n                })\r\n                .success(function(data) {\r\n                    if (data.success) {\r\n                        MessageApi.success('操作成功');\r\n                    }\r\n                    $scope.rmFromCollection(major.workTypes, index);\r\n                })\r\n        }\r\n\r\n\r\n        // We should definitely make live-create a component\r\n        // doing so many interweaving things is tiresome:\r\n        $scope.rmFromCollection = function(collection, index) {\r\n            collection.splice(index, 1);\r\n        }\r\n\r\n\r\n\r\n\r\n        $scope.createWT = function(majorId, workType, cb) {\r\n            // relative to ca/admin/ca.admin.html\r\n\r\n            $http.post('work-type', {\r\n                    majorId: majorId,\r\n                    workType: workType\r\n                })\r\n                .success(function(data) {\r\n                    cb(null, data);\r\n                    MessageApi.success('操作成功');\r\n                })\r\n                .error(function(data, status) {\r\n\r\n                    //console.log('though status is 200, still here')\r\n                    cb('fail', data);\r\n                })\r\n        }\r\n\r\n\r\n    }])\r\n    .controller('delMajorCtrl', [\"$scope\", \"$modalInstance\", function($scope, $modalInstance) {\r\n        // default:\r\n        $scope.delAppl = \"yes\";\r\n\r\n        $scope.ok = function() {\r\n            $modalInstance.close($scope.delAppl);\r\n        }\r\n        $scope.cancel = function() {\r\n            $modalInstance.dismiss();\r\n        };\r\n    }])\r\n\r\n\r\nfunction selectElementText(el, win) {\r\n    win = win || window;\r\n    var doc = win.document,\r\n        sel, range;\r\n    if (win.getSelection && doc.createRange) {\r\n        sel = win.getSelection();\r\n        range = doc.createRange();\r\n        range.selectNodeContents(el);\r\n        sel.removeAllRanges();\r\n        sel.addRange(range);\r\n    } else if (doc.body.createTextRange) {\r\n        range = doc.body.createTextRange();\r\n        range.moveToElementText(el);\r\n        range.select();\r\n    }\r\n}\r\n","// see #http://stackoverflow.com/questions/14883476/angularjs-call-method-in-directive-controller-from-other-controller\r\n\r\nvar MessageModule = angular.module('message', []);\r\n\r\n\r\nMessageModule.factory('MessageApi', [\"$timeout\", \"$rootScope\", function($timeout, $rootScope) {\r\n\r\n    // TODO: add animation for improved messaging.\r\n    // move timetoClear logic to directive for possible DOM handling (and for animation-CSS add and removal)\r\n    var DISPLAY_TIME = 2000;\r\n\r\n\r\n    return {\r\n        status: null,\r\n        message: null,\r\n        show: false,\r\n        hasChanged: function() {\r\n            var tmp = this._changed;\r\n            this._changed = false;\r\n            return tmp;\r\n        },\r\n\r\n        progress: function(msg) {\r\n\r\n            this._clearPrevTimeout();\r\n\r\n            this.status = 'info';\r\n            this.message = msg || '操作中，请稍候';\r\n            this.show = true;\r\n            this._changed = true;\r\n\r\n        },\r\n        success: function(msg) {\r\n            this._clearPrevTimeout();\r\n            this._timeout();\r\n\r\n            this.status = 'success';\r\n            this.message = msg || '操作成功';\r\n            this.show = true;\r\n            this._changed = true;\r\n\r\n        },\r\n\r\n        // for now, when error, we force the \"ugly alert\"\r\n        // and hide previous message\r\n\r\n        error: function(msg) {\r\n            // this._clearPrevTimeout();\r\n            // this._timeout();\r\n\r\n            this.show = false;\r\n            this._changed = true;\r\n\r\n            // TODO: make a popup\r\n            var defaultMsg = '操作失败';\r\n\r\n            alert(msg || defaultMsg);\r\n\r\n        },\r\n\r\n        // to think of a better name\r\n        finish: function() {\r\n            var api = this;\r\n\r\n            api.show = false;\r\n            this._changed = true;\r\n\r\n        },\r\n        _timeout: function(duration) {\r\n            duration = duration || DISPLAY_TIME;\r\n\r\n            var api = this;\r\n            this.timeoutPromise = $timeout(function() {\r\n                api.finish();\r\n            }, duration);\r\n\r\n        },\r\n\r\n        // if next call starts before previous call's timeout, we cancel that timeout.\r\n        _clearPrevTimeout: function() {\r\n            if (this.timeoutPromise) {\r\n                $timeout.cancel(this.timeoutPromise);\r\n                this.timeoutPromise = null;\r\n            }\r\n        }\r\n    }\r\n}]);\r\n\r\nMessageModule.directive('message', [\"MessageApi\", \"$timeout\", \"$animate\", function(MessageApi, $timeout, $animate) {\r\n\r\n    /* from https://github.com/angular/angular.js/blob/v1.2.28/src/ng/directive/ngShowHide.js#L237\r\n    * Keep in mind that, as of AngularJS version 1.2.17 (and 1.3.0-beta.11), there is no need to change the display\r\n    * property to block during animation states--ngAnimate will handle the style toggling automatically for you.\r\n    */\r\n\r\n    !window.angular.$$csp() &&\r\n    window.angular.element(document).find('head').prepend(\r\n        '<style type=\"text/css\">@charset \"UTF-8\";.gmessage-hide{display:none!important}.gmessage-hide-add-active,.gmessage-hide-remove{display:inline!important}.gmessage-hide-remove{-webkit-animation:expand .7s ease-out;animation:expand .7s ease-out}.gmessage-hide.gmessage-hide-add{-webkit-animation:fadeOut 1s;animation:fadeOut 1s}@-webkit-keyframes fadeOut{from{opacity:1}to{opacity:0}}@keyframes fadeOut{from{opacity:1}to{opacity:0}}@-webkit-keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@-webkit-keyframes expand{50%{-webkit-transform:scale(1.08);transform:scale(1.08)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes expand{50%{-webkit-transform:scale(1.08);transform:scale(1.08)}to{-webkit-transform:scale(1);transform:scale(1)}}</style>');\r\n\r\n\r\n    return {\r\n        restrict: 'AE',\r\n        scope: {},\r\n        replace: true,\r\n        link: function(scope, el, attrs) {\r\n            scope.api = MessageApi;\r\n\r\n            scope.$watch(function() {\r\n                return MessageApi.hasChanged()\r\n            }, function(changed, oldVal) {\r\n                if(changed || changed === oldVal/*first time run*/){\r\n                    $animate.addClass(el, 'gmessage-hide');\r\n                    if(MessageApi.show){\r\n                        $animate.removeClass(el, 'gmessage-hide');\r\n                    }\r\n                }\r\n            })\r\n\r\n        },\r\n        // todo: remove bootstrap class\r\n        template: '<span class=\"label label-{{api.status}} gf-message\">' +\r\n            \"{{api.message}}\" +\r\n            '</span>'\r\n    }\r\n}])\r\n.directive('spinner', [\"$http\", function($http) {\r\n    return {\r\n        restrict: 'EA',\r\n        scope: {},\r\n        replace: true,\r\n        // should be absoulte path\r\n        template: '<span class=\"spinner\"><img ng-show=\"spinnerVisible\" src=\"/img/ajax-loader.gif\" width=\"20\" height=\"20\" />' +\r\n\r\n            '</span>',\r\n        link: function(scope, element, attr) {\r\n            var img = element.children('img');\r\n\r\n            scope.$watch(function() {\r\n                return $http.pendingRequests.length > 0;\r\n            }, function(hasPending) {\r\n                if (hasPending) {\r\n                    scope.spinnerVisible = true;\r\n                } else {\r\n                    scope.spinnerVisible = false;\r\n                }\r\n            });\r\n        }\r\n    }\r\n}])\r\n\r\n","angular.module('liveCreate', [])\r\n\r\n/*.factory('LiveCreate', function() {\r\n\r\n    var obj = {};\r\n\r\n    return {\r\n        register: function(name, method, fn) {\r\n            var obj2 = obj[name] = obj[name] || {};\r\n            obj2[method] = fn;\r\n        },\r\n        create: function(name) {\r\n            obj[name].create();\r\n        }\r\n    }\r\n\r\n\r\n})*/\r\n\r\n.directive('liveCreate', function(/*some services. eg.LiveCreate */) {\r\n    return {\r\n\r\n        restrict: 'EA',\r\n        transclude: true,\r\n\r\n\r\n        link: function(scope, el, attrs) {\r\n\r\n        \tvar input = el.find('input')[0];\r\n            var $btnOK;\r\n            // IE9 will focus input even if it is hidden\r\n            // so I disable this code for now\r\n            // TODO: solve it in the future\r\n            // input.focus();\r\n            \r\n            if(scope.myModel._isNew) {\r\n        \t   input.focus();\r\n            }\r\n            \r\n        \t// looking for a better way:\r\n        \tscope.hasChild = angular.isDefined(attrs.hasChild);\r\n        \t\r\n            scope.someFn = function() {\r\n                // we are passing a map, which override existing params\r\n                // (note that even if we pass nothing, function would still succeed, because scope would\r\n                // find the right 'major')\r\n                var params = {};\r\n                params[attrs.myModel] = scope.myModel;\r\n                params.cb = function(err, data) {                    \r\n                    if(err){\r\n                        \r\n                        return scope.removeFromDom()\r\n                    }\r\n                    // TODO: consider using extend, not such full replacing.\r\n                    // attrs.myModel is a string\r\n                    angular.extend(scope.myModel, data[attrs.myModel]);\r\n\r\n                    // we don't need this code, just run it for clarification\r\n                    scope.myModel._isNew = false;\r\n                };\r\n\r\n                scope.upsert(params)\r\n            }\r\n\r\n            scope.remove = function() {\r\n                var c = confirm('确定要删除么？');\r\n                if(!c) return;\r\n\r\n                scope.removeFn();\r\n            }\r\n\r\n            scope.cancel = function() {\r\n                if(scope.myModel._id) {\r\n                    // then it is an editing\r\n                    cancelEdit();\r\n                    \r\n                    return;\r\n                }\r\n                scope.removeFromDom();\r\n            }\r\n\r\n            scope.edit = function() {\r\n                scope.myModel._isNew = true;\r\n                scope.oldModel = angular.copy (scope.myModel);                \r\n            }\r\n\r\n\r\n            // I use to do it like this: (deprecated)\r\n            // ng-keypress=\"pressEnter($event)\"\r\n            /*scope.pressEnter = function(event) {\r\n                \r\n                if(event.keyCode == 13) {\r\n                    event.preventDefault();\r\n                    \r\n                    // $btnOK = $btnOK || el.find('button').eq(0);\r\n                    //  TODO: I would love to code like this: $btnOK.triggerHandler('click');\r\n                    // but '$apply already in progress' -- and I have no time.\r\n                    // so a makeshift:\r\n                    if(scope.myModel.name) scope.someFn();\r\n                }\r\n            }*/\r\n\r\n            function cancelEdit() {\r\n                \r\n                angular.extend(scope.myModel, scope.oldModel);\r\n                scope.myModel._isNew = false;\r\n                \r\n            }\r\n\r\n\r\n        },\r\n        scope: {\r\n            myModel: \"=\",\r\n            // modelName is for data retrieval\r\n            modelName: \"@\",\r\n            upsert: \"&\",\r\n            removeFn: \"&\",\r\n            addChild: \"&\",\r\n            myPlaceholder: \"@\",\r\n            myClass: \"@\",\r\n            removeFromDom: \"&\",\r\n            mode:\"@\"\r\n        },\r\n        templateUrl: \"templates/major.html\"\r\n    }\r\n})","var app = angular.module('myApp', ['taiPlaceholder', 'message', 'misc', 'liveCreate', 'ui.bootstrap', 'angularLoad', 'ngSanitize','ngAnimate'])\r\n    .config([\"$httpProvider\", function($httpProvider) {\r\n        // $httpProvider.interceptors.push(b);\r\n        $httpProvider.interceptors.push([\"$q\", \"MessageApi\", function($q, MessageApi) {\r\n            function getMessage(res) {\r\n                var msg = res && res.data && res.data.message\r\n\r\n                // msg may be undefined, but that's ok.\r\n                // MessageApi will handle that\r\n                return msg;\r\n            }\r\n\r\n            return {\r\n                /*'request': function(config) {\r\n\r\n                    return config;\r\n                },*/\r\n                'response': function(res) {\r\n\r\n                    // thought status is 200, if success is false,\r\n                    // we redirect it as a responseError\r\n                    if (res.data && res.data.success === false) {\r\n                        var msg = getMessage(res);\r\n                        // if no msg, we suppress notification.\r\n                        // and only when not mute.\r\n                        if (msg && !res.config.mute) {\r\n                            MessageApi.error(msg);\r\n                        }\r\n                        return $q.reject(res);\r\n                    }\r\n                    return res;\r\n                },\r\n                responseError: function(res) {\r\n\r\n                    var msg = getMessage(res);\r\n                    // if no msg, we suppress notification.\r\n                    if (msg) {\r\n                        MessageApi.error(msg);\r\n                    }\r\n                    // if simply returning res, it is recovered, would be handled in success handler\r\n                    return $q.reject(res);\r\n                }\r\n            };\r\n        }]);\r\n\r\n    }])\r\n    .controller('appCtrl', [\"$scope\", \"$http\", \"$modal\", \"MessageApi\", \"$timeout\", function($scope, $http, $modal, MessageApi, $timeout) {\r\n\r\n        $scope.testMessage= function() {\r\n            MessageApi.success('hey!');\r\n        }\r\n\r\n        $scope.$on('freeze', function(e, freezed) {\r\n            $scope.freezed = freezed;\r\n        })\r\n\r\n        $scope.onClickTab = function(tab) {\r\n\r\n            $scope.currentTab = tab;\r\n        }\r\n\r\n        $scope.isActive = function(tab) {\r\n            if (!$scope.currentTab) return false;\r\n            return tab.url == $scope.currentTab.url;\r\n        }\r\n        $scope.openLogin = function() {\r\n            $modal.open({\r\n                templateUrl: 'views/login.html',\r\n                controller: 'loginCtrl',\r\n                size: 'sm',\r\n                backdrop: false,\r\n                windowClass: \"login-modal\"\r\n            }).result.then(function(user) {\r\n                $scope.logged = true;\r\n                // temp, I'll recode user part\r\n                $scope.role = user.role;\r\n                MessageApi.success('登录成功');\r\n            }, function(data) {\r\n\r\n            })\r\n        }\r\n        $scope.logout = function() {\r\n            // yes, we should use a global error handler to handle every $http.error\r\n            $http.post('logout')\r\n                .success(function(data) {\r\n                    if (data.success) {\r\n                        $scope.logged = false;\r\n                        delete $scope.role;\r\n                        MessageApi.success('成功退出');\r\n                        $timeout(clearScope, 500);\r\n\r\n                    }\r\n                })\r\n        }\r\n\r\n        function startApp() {\r\n            // TODO: use a better tab system. shouldn't write it here\r\n            // maybe use ng-bootstrap\r\n            $scope.tabs = [{\r\n                title: '专业和工种管理',\r\n                url: 'views/major-and-work-type.html'\r\n            }, {\r\n                title: '申请结果查询',\r\n                url: 'views/ca-results.html',\r\n\r\n            }, {\r\n                title: '系统帐号管理',\r\n                url: 'views/sys-account.html'\r\n            }, {\r\n                title: \"展示信息编辑\",\r\n                url: 'views/editor.html'\r\n            }];\r\n            if($scope.role == \"crapSubMgr\"){\r\n                $scope.tabs = [$scope.tabs[1]]\r\n            }\r\n            $scope.currentTab = $scope.tabs[0];\r\n        }\r\n\r\n        function clearScope() {\r\n            $scope.tabs = null;\r\n            delete $scope.currentTab;\r\n        }\r\n\r\n        function checkLogged() {\r\n            $http.post('isLogged')\r\n                .success(function(data) {\r\n                    if (data.logged) {\r\n                        $scope.logged = data.logged\r\n                        $scope.role = data.role;\r\n                    } else {\r\n                        $scope.openLogin();\r\n                    }\r\n                })\r\n        }\r\n\r\n        $scope.$watch('logged', function(val) {\r\n            if (val) {\r\n                startApp();\r\n            }\r\n        });\r\n        checkLogged();\r\n\r\n    }]);\r\n","var app = angular.module('myApp')\r\n\r\napp.controller('loginCtrl', [\"$scope\", \"$modalInstance\", \"$http\", \"MessageApi\", function($scope, $modalInstance, $http, MessageApi) {\r\n\tvar url = \"login\"\r\n\t$scope.user = {};\r\n\t/*$scope.focus = true;*/\r\n\t$scope.ok = function() {\r\n\t\t$http.post(url, {\r\n\t\t\t\tuser: $scope.user\r\n\t\t\t})\r\n\t\t\t.success(function(data) {\r\n\t\t\t\tif (data.success) $modalInstance.close(data.user);\r\n\r\n\t\t\t})\r\n\r\n\t};\r\n\t$scope.cancel = function() {\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n\r\n}])\r\n\r\napp.controller('userCtrl', [\"$scope\", \"$http\", \"$modal\", \"MessageApi\", function($scope, $http, $modal, MessageApi) {\r\n\t\r\n\t\r\n\t$scope.users = [];\r\n\t\r\n\t$scope.upsert = function(user, index) {\r\n\t\tvar successMsg = user ? \"编辑成功\" : \"添加成功\";\r\n\t\t$modal.open({\r\n\t\t\ttemplateUrl: 'views/upsert-user.html',\r\n\t\t\tcontroller: \"userUpsertCtrl\",\r\n\t\t\t// size: 'lg',\r\n\t\t\tresolve: {\r\n\t\t\t\tuser: function() {\r\n\t\t\t\t\treturn angular.copy(user);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbackdrop: 'static'\r\n\t\t}).result.then(function(data) {\r\n\t\t\tMessageApi.success(successMsg);\r\n\t\t\tif(user){\r\n\t\t\t\t// user must be an object, or else it would fail\r\n\t\t\t\tangular.extend(user, data.user);\r\n\t\t\t\t// $scope.users.splice(index, 1, data.user);\r\n\t\t\t}else{\r\n\t\t\t\t$scope.users.unshift(data.user);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}, function(data) {\r\n\r\n\t\t})\r\n\t}\r\n\t$scope.remove = function(user) {\r\n\t\tvar confirmed = confirm(\"确定删除么\");\r\n\t\tif (!confirmed) return;\r\n\t\t$http[\"delete\"]('users/' + user._id)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\tMessageApi.success(\"删除成功\");\r\n\t\t\t\t$scope.users.splice($scope.users.indexOf(user), 1);\r\n\t\t\t})\r\n\t}\r\n\r\n\r\n\tfunction init() {\r\n\t\t$http.get('users', {mute: true})\r\n\t\t\t.success(function(data) {\r\n\t\t\t\t$scope.users = data.users;\r\n\t\t\t})\r\n\t}\r\n\r\n\tinit();\r\n\r\n}])\r\napp.controller('userUpsertCtrl', [\"$scope\", \"$modalInstance\", \"$http\", \"user\", function($scope, $modalInstance, $http, user) {\r\n\t\r\n\r\n\tvar editing = user ? true : false;\r\n\tvar method = user ? \"put\" : \"post\";\r\n\tvar url = user ? \"users/\" + user._id : \"users\";\r\n\r\n\r\n\t$scope.user = user || {};\r\n\t$scope.editing = editing;\r\n\r\n\t$scope.ok = function() {\r\n\r\n\t\t$http[method](url, {\r\n\t\t\t\tuser: $scope.user\r\n\t\t\t})\r\n\t\t\t.success(function(data) {\r\n\t\t\t\t$modalInstance.close(data);\r\n\t\t\t})\r\n\r\n\t};\r\n\t$scope.cancel = function() {\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n\t\r\n\t\r\n}])\r\n","angular.module('myApp')\r\n    .controller('resultCtrl', [\"$scope\", \"$http\", \"$log\", \"MessageApi\", function($scope, $http, $log, MessageApi) {\r\n        var lastCriteria;\r\n        // note: it is ok to remove the following code, angularjs would dynamically create an entire object\r\n        // even ng-model is a named string like \"criteria.date\"\r\n\r\n        /*$scope.criteria = {};*/\r\n\r\n        $scope.pagination = {\r\n            currentPage: 1,\r\n            itemsPerPage: 10,\r\n            maxSize: 5\r\n        }\r\n\r\n        $scope.$watch(\"searching\", function(val, oldVal) {\r\n\r\n            if (val) {\r\n                MessageApi.progress('查找中..');\r\n            } else {\r\n                // pass 0 to clear progress info right away\r\n                MessageApi.finish();\r\n            }\r\n        });\r\n\r\n        /**\r\n         * after field is touched, angular will add the related key to the model object\r\n         * so when we do some query, it would cause some misunderstanding\r\n         * (whether it is a query of items whose field is empty or a query of items that does not have that field)\r\n         * @param  {[type]} criteria [description]\r\n         * @param  {[type]} pagin    should be an object {page: .., limit:..} if not passed, it is an entire export\r\n         *                           most likely to be an excel output\r\n         * @return {[type]}          an object ready to be passed into buildUrl (a private function of $http, I implemented\r\n         *                           it here too)\r\n         */\r\n        function makeParams(criteria, pagin) {\r\n            // we don't want pagination info get into criteria obj,\r\n            // so copy it\r\n            var ret = angular.extend({}, criteria);\r\n\r\n            if (pagin) {\r\n                ret.page = pagin.page || 1;\r\n                ret.limit = pagin.limit || $scope.pagination.itemsPerPage\r\n            }\r\n            // remove empty props:\r\n            angular.forEach(ret, function(val, key) {\r\n                // the following senarios:\r\n                // undefined, null, ''\r\n                if (!val && val !== 0) {\r\n                    delete this[key]\r\n                }\r\n            }, ret)\r\n            // we add some timestamp, here for now\r\n            // consider adding some header to prevent IE from caching ( not cache by default)\r\n            // it is so-called back-end, everything can be un-cached\r\n            ret.ts = +new Date;\r\n\r\n            return ret;\r\n        }\r\n\r\n        $scope.download = function(e) {\r\n\r\n            var urlPart = buildUrl(makeParams(lastCriteria));\r\n\r\n            $scope.dlUrl = \"ca-results/to-excel\" + urlPart;\r\n\r\n            // TODO: we should have MessageApi.info()\r\n            MessageApi.success('即将开始下载..');\r\n\r\n            function buildUrl(obj) {\r\n                var arr = [];\r\n                var ret;\r\n                angular.forEach(obj, function(val, key) {\r\n                    arr.push(key + '=' + encodeURIComponent(val))\r\n                })\r\n                if (!arr.length) {\r\n                    ret = \"\";\r\n                } else {\r\n                    ret = \"?\" + arr.join(\"&\")\r\n                }\r\n                return ret;\r\n            }\r\n        }\r\n\r\n        $scope.find = function(criteria, page, mute) {\r\n            // it may desync,\r\n            // so we make a copy of criteria\r\n            criteria = angular.copy(criteria);\r\n\r\n            $http.get('ca-results', {\r\n                    params: makeParams(criteria, {\r\n                        page: page\r\n                    }),\r\n                    mute: mute\r\n                })\r\n                .success(function(data) {\r\n\r\n                    $scope.results = data.results;\r\n                    $scope.pagination.total = data.total;\r\n                    // criteria is already a copied version, so it's ok to just equal them\r\n                    lastCriteria = criteria;\r\n                    $scope.searching = false;\r\n                }).error(function(data) {\r\n                    $scope.searching = false;\r\n                });\r\n\r\n            $scope.searching = true;\r\n\r\n        }\r\n        $scope.remove = function(item, index) {\r\n\r\n\r\n            var selectedIds = getSelectedIds($scope.results)\r\n\r\n            var confirmed = confirm('确定要删除这' + selectedIds.length + '项么');\r\n            if (!confirmed) return;\r\n\r\n            // just not confident enough, may never run this\r\n            if(!$scope.selectedIds.length) return;\r\n\r\n            // copy it for future removal (it could changed during http request)\r\n            var copy = angular.copy(selectedIds);\r\n\r\n            // seems DELETE cannot send data with it (except using url)\r\n            $http[\"post\"]('ca-results', {ids: $scope.selectedIds}, {\r\n                    headers: {\r\n                        \"X-HTTP-Method-Override\": \"DELETE\"\r\n                    }\r\n                })\r\n                .success(function(data) {\r\n\r\n                    if (data.success) {\r\n                        MessageApi.success('删除成功');\r\n                        // forEach will succeed but I doubt if it is cross-browser,\r\n                        // angular is most likely to implement it using native forEach delegation\r\n\r\n                        /*angular.forEach($scope.results, function(r, i) {\r\n                            if( ~copy.indexOf(r._id) ){\r\n                                $scope.results.splice(i, 1);\r\n                            }\r\n                        })*/\r\n\r\n                        // so I do it like this:\r\n                        // #http://stackoverflow.com/questions/9882284/looping-through-array-and-removing-items-without-breaking-for-loop\r\n                        var i = $scope.results.length;\r\n                        while(i--){\r\n                            if (~copy.indexOf($scope.results[i]._id)){\r\n                                $scope.results.splice(i, 1);\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                })\r\n        }\r\n\r\n        $scope.pageChanged = function() {\r\n            $scope.find(lastCriteria, $scope.pagination.currentPage);\r\n        };\r\n\r\n        $scope.datepicker = {\r\n            formats: ['yyyy-MM-dd'],\r\n            options: {\r\n                startingDay: 1,\r\n                showWeeks: false\r\n            }\r\n        }\r\n        $scope.openDatepicker = function($event, dir) {\r\n            $event.preventDefault();\r\n            $event.stopPropagation();\r\n            $scope.datepicker[dir] = $scope.datepicker[dir] || {};\r\n            $scope.datepicker[dir].opened = true;\r\n        }\r\n\r\n\r\n        $scope.$watch(\"allSelected\", function(newVal, oldVal) {\r\n            if (newVal === oldVal) return;\r\n\r\n            angular.forEach($scope.results, function(r) {\r\n                r.selected = newVal;\r\n            })\r\n\r\n        });\r\n\r\n        $scope.$watch(function() {\r\n            return getSelectedIds($scope.results).length\r\n        }, function(newVal, oldVal) {\r\n            if (newVal === oldVal) return;\r\n            if (newVal === 0) {\r\n                $scope.allSelected = false;\r\n                return;\r\n            }\r\n            if (newVal === $scope.results.length) {\r\n                $scope.allSelected = true;\r\n            }\r\n        })\r\n\r\n\r\n        function getSelectedIds(items) {\r\n            getSelectedIds._count = (getSelectedIds._count || 0) + 1;\r\n\r\n\r\n            var arr = [];\r\n            angular.forEach(items, function(item) {\r\n                if (item.selected) arr.push(item._id);\r\n            })\r\n\r\n            // the following is important, mainly for improving perfermance.\r\n            $scope.selectedIds = arr;\r\n            return arr;\r\n        }\r\n\r\n        function init() {\r\n            $http\r\n                .get('majors')\r\n                .success(function(data) {\r\n                    $scope.majors = data.majors;\r\n                });\r\n            $http.get('work-types')\r\n                .success(function(data) {\r\n                    $scope.workTypes = data.workTypes;\r\n                })\r\n                // if first load, we mute the query.\r\n                // (if no result was found, we speak nothing)\r\n            $scope.find($scope.criteria, 1, true);\r\n        }\r\n        init();\r\n    }])\r\n","/* angular-load.js / v0.2.0 / (c) 2014 Uri Shaked / MIT Licence */\r\n;(function () {\r\n\t'use strict';\r\n\r\n\tangular.module('angularLoad', [])\r\n\t\t.service('angularLoad', ['$document', '$q', '$timeout', '$cacheFactory', function ($document, $q, $timeout, $cacheFactory) {\r\n\r\n\t\t\t/**\r\n\t\t\t * Dynamically loads the given script\r\n\t\t\t * @param src The url of the script to load dynamically\r\n\t\t\t * @returns {*} Promise that will be resolved once the script has been loaded.\r\n\t\t\t */\r\n\r\n\t\t\tvar cache = $cacheFactory('angularLoad');\r\n\r\n\t\t\tthis.loadScript = function (src) {\r\n\r\n\t\t\t\tvar deferred = $q.defer();\r\n\t\t\t\tvar p = cache.get(src);\r\n\r\n\t\t\t\tif(p){\r\n\t\t\t\t\treturn p;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcache.put(src, deferred.promise);\r\n\r\n\t\t\t\tvar script = $document[0].createElement('script');\r\n\t\t\t\tscript.onload = script.onreadystatechange = function (e) {\r\n\t\t\t\t\t// ie8:\r\n\t\t\t\t\tif (!e && script.readyState != 'loaded') return;\r\n\t\t\t\t\t$timeout(function () {\r\n\t\t\t\t\t\tdeferred.resolve(e);\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\tscript.onerror = function (e) {\r\n\t\t\t\t\t$timeout(function () {\r\n\t\t\t\t\t\tdeferred.reject(e);\r\n\t\t\t\t\t\t// if failed, re-loading is enabled\r\n\t\t\t\t\t\tcache.remove(src);\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\tscript.src = src;\r\n\t\t\t\t$document[0].body.appendChild(script);\r\n\r\n\r\n\t\t\t\treturn deferred.promise;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Dynamically loads the given CSS file\r\n\t\t\t * @param href The url of the CSS to load dynamically\r\n\t\t\t * @returns {*} Promise that will be resolved once the CSS file has been loaded.\r\n\t\t\t */\r\n\t\t\tthis.loadCSS = function (href) {\r\n\t\t\t\tvar deferred = $q.defer();\r\n\t\t\t\tvar style = $document[0].createElement('link');\r\n\t\t\t\tstyle.rel = 'stylesheet';\r\n\t\t\t\tstyle.type = 'text/css';\r\n\t\t\t\tstyle.href = href;\r\n\t\t\t\tstyle.onload = style.onreadystatechange = function (e) {\r\n\t\t\t\t\t$timeout(function () {\r\n\t\t\t\t\t\tdeferred.resolve(e);\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\tstyle.onerror = function (e) {\r\n\t\t\t\t\t$timeout(function () {\r\n\t\t\t\t\t\tdeferred.reject(e);\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\t$document[0].head.appendChild(style);\r\n\t\t\t\treturn deferred.promise;\r\n\t\t\t};\r\n\t\t}]);\r\n\r\n})();","var app = angular.module('myApp')\r\napp.factory(\"ArticleMgr\", [\"$cacheFactory\", function($cacheFactory) {\r\n\tvar cache = $cacheFactory(\"articles\");\r\n\tcache.put(\"readme\", {\r\n\t\tslug: \"readme\",\r\n\t\turl: '../articles/readme'\r\n\t});\r\n\tcache.put('help', {\r\n\t\tslug: \"help\",\r\n\t\turl: \"../articles/help\"\r\n\t})\r\n\tcache.put('center', {\r\n\t\tslug: \"center\",\r\n\t\turl: '../articles/center'\r\n\t})\r\n\treturn cache;\r\n}])\r\napp.controller('editorCtrl', [\"$scope\", \"$http\", \"MessageApi\", \"angularLoad\", \"$timeout\", \"$q\", \"$modal\", \"$sce\", function($scope, $http, MessageApi, angularLoad, $timeout, $q, $modal, $sce) {\r\n\t// freeze tab upon navigation\r\n\tvar p1 = angularLoad.loadScript(\"vendors/tinymce/tinymce.min.js\");\r\n\r\n\t$scope.articles = {};\r\n\r\n\tvar slugMap = {\r\n\t\t\"readme\": 'readme',\r\n\t\t\"help\": 'help',\r\n\t\t\"center\": 'center'\r\n\t}\r\n\r\n\t$scope.$on('freeze', function(e, freezed) {\r\n\t\t$scope.freezed = freezed;\r\n\t})\r\n\r\n\t$scope.selectTab = function(id) {\r\n\r\n\t\t$scope.$emit('freeze', true);\r\n\r\n\t\tstartTinymce(id);\r\n\r\n\t}\r\n\r\n\t// it also destroy the last instance\r\n\t// don't want to dive deep into tinymce. for now this is good enough\r\n\tfunction startTinymce(id) {\r\n\r\n\t\tvar articlePromise = $http.get(\"articles/\" + slugMap[id] + \"?ts=\" + (+new Date));\r\n\r\n\t\t$q.all([p1, articlePromise]).then(function(results) {\r\n\r\n\t\t\t// if returned value is null, this article has not been created\r\n\t\t\t// we give it created: false flag.\r\n\t\t\t$scope.articles[id] = results[1].data.article\r\n\t\t\tif (!results[1].data.article) {\r\n\t\t\t\t$scope.articles[id] = {\r\n\t\t\t\t\t_new: true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/*else {\r\n\t\t\t\t\t\t\tvar order = $scope.articles[id].order;\r\n\t\t\t\t\t\t\tif(order) $scope.articles[id].order = $scope.orderArr[order-1]\r\n\t\t\t\t\t\t\tconsole.log($scope.articles[id].order);\r\n\t\t\t\t\t\t}*/\r\n\r\n\r\n\t\t\tvar inst = tinymce.get(id);\r\n\t\t\tinst && inst.destroy();\r\n\r\n\t\t\ttinymce.init({\r\n\t\t\t\tselector: \"#\" + id,\r\n\t\t\t\theight: 400,\r\n\t\t\t\ttheme: \"modern\",\r\n\t\t\t\tcontent_css: [\"../../vendors/bootstrap-3.2.0-dist/css/bootstrap.min.css\", \"css/ca.admin.css\"],\r\n\t\t\t\tplugins: [\r\n\t\t\t\t\t\"advlist autolink lists link image hr\",\r\n\t\t\t\t\t\"code\",\r\n\t\t\t\t\t\"table contextmenu\",\r\n\t\t\t\t\t\"paste textcolor colorpicker\"\r\n\t\t\t\t],\r\n\r\n\t\t\t\ttoolbar1: \"insertfile undo redo paste pastetext | styleselect removeformat | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | code\",\r\n\t\t\t\ttoolbar2: \"fontselect fontsizeselect bold italic | forecolor backcolor | table link image hr\",\r\n\r\n\t\t\t\ttable_default_styles: {\r\n\t\t\t\t\t// overwrite what tinycme provides, to congrute with bootstrap body default\r\n\t\t\t\t\t// does not work because it only add style to table\r\n\t\t\t\t\t/*fontFamily: '\"Helvetica Neue\",Helvetica,Arial,sans-serif',\r\n\t\t\t\t\tfontSize: '14px'*/\r\n\t\t\t\t},\r\n\t\t\t\ttable_class_list: [{title:\"无\",value:\"\"},{\r\n\t\t\t\t\ttitle: '内间距',\r\n\t\t\t\t\tvalue: 'mce-table-style-padding'\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttitle: '居中',\r\n\t\t\t\t\tvalue: 'mce-table-style-center'\r\n\t\t\t\t}],\r\n\t\t\t\tcontextmenu: \"link image inserttable | tableprops cell row column deletetable\",\r\n\t\t\t\t// image_advtab: true,\r\n\t\t\t\tlanguage: 'zh_CN',\r\n\t\t\t\tmenubar: false,\r\n\t\t\t\tstatusbar: false,\r\n\t\t\t\tfontsize_formats: \"8pt 9pt 10pt 11pt 12pt 13pt 14pt 15pt 16pt 18pt 20pt 24pt 36pt\",\r\n\t\t\t\tsetup: function(editor) {\r\n\t\t\t\t\teditor.on('init', function(e) {\r\n\t\t\t\t\t\t$timeout(function() {\r\n\t\t\t\t\t\t\t\t$scope.$emit('freeze', false);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t// article returned from server is possibly null\r\n\t\t\t\t\t\tif ($scope.articles[id]) {\r\n\t\t\t\t\t\t\teditor.setContent($scope.articles[id].content || \"\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tfont_formats: '楷体=KaiTi,KaiTi_GB2312;' +\r\n\t\t\t\t\t'宋体=SimSun,FangSong,FangSong_GB2312;' +\r\n\t\t\t\t\t'微软雅黑=Microsoft YaHei;' +\r\n\t\t\t\t\t'黑体=SimHei;' +\r\n\t\t\t\t\t\"Arial=arial,helvetica,sans-serif;\" +\r\n\t\t\t\t\t\"Arial Black=arial black,avant garde;\" +\r\n\t\t\t\t\t\"Courier New=courier new,courier;\" +\r\n\t\t\t\t\t\"Georgia=georgia,palatino;\" +\r\n\t\t\t\t\t\"Helvetica=helvetica;\" +\r\n\t\t\t\t\t\"Impact=impact,chicago;\" +\r\n\t\t\t\t\t\"Tahoma=tahoma,arial,helvetica,sans-serif;\" +\r\n\t\t\t\t\t\"Terminal=terminal,monaco;\" +\r\n\t\t\t\t\t\"Times New Roman=times new roman,times;\" +\r\n\t\t\t\t\t\"Trebuchet MS=trebuchet ms,geneva;\" +\r\n\t\t\t\t\t\"Verdana=verdana,geneva;\"\r\n\r\n\t\t\t});\r\n\r\n\r\n\t\t})\r\n\r\n\t}\r\n\r\n\t$scope.submit = function(id) {\r\n\r\n\t\tvar article = $scope.articles[id];\r\n\t\tarticle.content = tinymce.get(id).getContent();\r\n\t\tvar p;\r\n\t\tif (article._new) {\r\n\t\t\tarticle.slug = slugMap[id];\r\n\t\t\tp = $http.post(\"articles\", article);\r\n\t\t} else {\r\n\t\t\tp = $http.put(\"articles/\" + slugMap[id], article);\r\n\t\t}\r\n\t\tp.success(function(r) {\r\n\t\t\tMessageApi.success('保存成功');\r\n\t\t\t$scope.articles[id] = r.article;\r\n\t\t})\r\n\t}\r\n\r\n\t$scope.preview = function(id) {\r\n\r\n\t\tvar modalInstance = $modal.open({\r\n\t\t\ttemplateUrl: '../views/article.modal.html',\r\n\t\t\tcontroller: [\"$scope\", \"$modalInstance\", \"article\", function($scope, $modalInstance, article) {\r\n\t\t\t\t$scope.article = article;\r\n\r\n\t\t\t\t$scope.ok = function() {\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.cancel = function() {\r\n\t\t\t\t\t$modalInstance.dismiss('cancel');\r\n\t\t\t\t};\r\n\t\t\t}],\r\n\t\t\tsize: 'lg',\r\n\t\t\tresolve: {\r\n\t\t\t\tarticle: function() {\r\n\t\t\t\t\tvar article = $scope.articles[id];\r\n\t\t\t\t\tvar content = tinymce.get(id).getContent();\r\n\t\t\t\t\tarticle.content = $sce.trustAsHtml(content);\r\n\t\t\t\t\treturn article\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\r\n\r\n}])\r\n","angular.module(\"myApp\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"templates/live-edit.html\",\"\");\n$templateCache.put(\"templates/major.html\",\"<div class=\\\"{{myClass}}\\\">\\r\\n    <input type=\\\"text\\\" ng-model=\\\"myModel.name\\\" ng-show=\\\"myModel._isNew\\\" placeholder={{myPlaceholder||\\'输入名称\\'}} gf-enter=\\\"someFn()\\\" gf-escape=\\\"cancel()\\\">\\r\\n    <div class=\\\"btn-group\\\" ng-show=\\\"myModel._isNew\\\">\\r\\n\t    <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"someFn()\\\" ng-disabled=\\\"!myModel.name\\\">\\r\\n\t      \t<span class=\\\"glyphicon glyphicon-ok\\\" aria-hidden=\\\"true\\\"></span>\\r\\n\t    </button>\\r\\n\t    <button type=\\\"button\\\" class=\\\"btn btn-primary\\\"  ng-click=\\\"cancel()\\\">\\r\\n\t      \t<span class=\\\"glyphicon glyphicon-remove\\\" aria-hidden=\\\"true\\\"></span>\\r\\n\t    </button>\\r\\n    </div>\\r\\n\\r\\n\\r\\n    <span ng-hide=\\\"myModel._isNew\\\" class=\\\"name\\\" title=\\\"{{myModel.name}}\\\">{{myModel.name}}</span>\\r\\n\\r\\n\\r\\n\t<button type=\\\"button\\\" ng-click=\\\"remove()\\\" ng-show=\\\"mode==\\'simple\\'&&!myModel._isNew\\\" class=\\\"close btn-remove\\\">\\r\\n\t    <span>&times</span>\\r\\n\t</button>\\r\\n\\r\\n\t<div class=\\\"btn-toolbar\\\" ng-show=\\\"mode!=\\'simple\\'\\\">\\r\\n\t\t\\r\\n\t    <div class=\\\"btn-group\\\" ng-hide=\\\"myModel._isNew\\\">\\r\\n\t\t\t<button type=\\\"button\\\" class=\\\"btn btn-default btn-sm\\\" ng-click=\\\"edit()\\\">编辑</button>\\r\\n\t\t\t<button type=\\\"button\\\" class=\\\"btn btn-default btn-sm\\\" ng-click=\\\"remove()\\\">删除</button>\\r\\n\t\t</div>\\r\\n\t\t<div class=\\\"btn-group\\\"> \\r\\n\t    \t<button class=\\\"btn btn-primary btn-sm\\\" ng-click=\\\"addChild(myModel)\\\" ng-hide=\\\"myModel._isNew|| !hasChild\\\">添加工种</button>\\r\\n    \t</div>\\r\\n\t</div>\\r\\n    \\r\\n</div>\\r\\n\\r\\n<div ng-transclude></div>\");\n$templateCache.put(\"views/ca-results.html\",\"<div ng-controller=\\\"resultCtrl\\\">\\r\\n    <div class=\\\"control-panel\\\">\\r\\n        <form class=\\\"form-inline\\\" ng-submit=\\\"find(criteria)\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label class=\\\"sr-only\\\" for=\\\"crapId\\\">认证编号</label>\\r\\n                <input class=\\\"form-control\\\" id=\\\"crapId\\\" placeholder=\\\"认证编号\\\" ng-model=\\\"criteria._id\\\">\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label class=\\\"sr-only\\\" for=\\\"certnumber\\\">证书号</label>\\r\\n                <input class=\\\"form-control\\\" id=\\\"certnumber\\\" placeholder=\\\"证书号\\\" ng-model=\\\"criteria.certnumber\\\">\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label class=\\\"sr-only\\\" for=\\\"idnumber\\\">身份证号</label>\\r\\n                <input class=\\\"form-control\\\" id=\\\"idnumber\\\" placeholder=\\\"身份证号\\\" ng-model=\\\"criteria.idnumber\\\">\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label class=\\\"sr-only\\\" for=\\\"name\\\">姓名</label>\\r\\n                <input class=\\\"form-control name\\\" id=\\\"name\\\" placeholder=\\\"姓名\\\" ng-model=\\\"criteria.name\\\">\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label class=\\\"sr-only\\\" for=\\\"studNumber\\\">学号</label>\\r\\n                <input class=\\\"form-control\\\" id=\\\"studNumber\\\" placeholder=\\\"学号\\\" ng-model=\\\"criteria.studNumber\\\">\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <select id=\\\"major\\\" class=\\\"form-control\\\" ng-model=\\\"criteria.major\\\" ng-options=\\\"major._id as major.name for major in majors\\\">\\r\\n                    <option value=\\\"\\\">选择专业</option>\\r\\n                </select>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <!-- sometimes worktype not using camelCase is due to my poor db design-->\\r\\n                <select class=\\\"form-control\\\" ng-model=\\\"criteria.worktype\\\" ng-options=\\\"workType.name as workType.name for workType in workTypes\\\">\\r\\n                    <option value=\\\"\\\">选择工种</option>\\r\\n                </select>\\r\\n            </div>\\r\\n\\r\\n\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <label class=\\\"sr-only\\\">日期</label>\\r\\n                <div class=\\\"input-group\\\">\\r\\n                    <input type=\\\"text\\\" class=\\\"form-control from\\\" ng-model=\\\"criteria.from\\\" datepicker-popup is-open=\\\"datepicker.from.opened\\\" datepicker-options=\\\"datepicker.options\\\" placeholder=\\\"默认2014-12-01\\\" />\\r\\n                    <span class=\\\"input-group-btn\\\">\\r\\n                        <a class=\\\"btn btn-default\\\" ng-click=\\\"openDatepicker($event, \\'from\\')\\\"><i class=\\\"glyphicon glyphicon-calendar\\\"></i>\\r\\n                        </a>\\r\\n                    </span>\\r\\n                </div>\\r\\n                <span class=\\\"control-label to\\\">至</span>\\r\\n                <div class=\\\"input-group \\\">\\r\\n                    <input type=\\\"text\\\" class=\\\"form-control to\\\" ng-model=\\\"criteria.to\\\" datepicker-popup is-open=\\\"datepicker.to.opened\\\" datepicker-options=\\\"datepicker.options\\\" placeholder=\\\"默认今天\\\" />\\r\\n                    <span class=\\\"input-group-btn\\\">\\r\\n                        <a class=\\\"btn btn-default\\\" ng-click=\\\"openDatepicker($event, \\'to\\')\\\"><i class=\\\"glyphicon glyphicon-calendar\\\"></i>\\r\\n                        </a>\\r\\n                    </span>\\r\\n                </div>\\r\\n            </div>\\r\\n            \\r\\n\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <input type=\\\"submit\\\" class=\\\"btn btn-primary\\\" value=\\\"查找\\\" ng-disabled=\\\"searching\\\">\\r\\n                <a class=\\\"btn btn-primary\\\" href=\\\"\\\" download ng-click=\\\"download($event)\\\" ng-href=\\\"{{dlUrl}}\\\">导出</a>\\r\\n                <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"!selectedIds.length\\\" ng-click=\\\"remove()\\\">删除</button>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"form-group fuzzy\\\">\\r\\n                <label tooltip=\\\"开启后搜索速度可能较慢，请耐心等待\\\">\\r\\n                    <input type=\\\"checkbox\\\" ng-model=\\\"criteria.fuzzy\\\">模糊搜索\\r\\n                </label>\\r\\n\\r\\n            </div>\\r\\n\\r\\n\\r\\n        </form>\\r\\n\\r\\n    </div>\\r\\n    <div class=\\\"table-responsive ca-results\\\">\\r\\n        <table class=\\\"table table-bordered table-hover text-center\\\">\\r\\n            <thead>\\r\\n                <tr>\\r\\n                    <th>\\r\\n                        <label><input type=\\\"checkbox\\\" ng-model=\\\"allSelected\\\">全选</label>\\r\\n                    </th>\\r\\n                    <th class=\\\"text-center\\\">认证编号</th>\\r\\n                    <th class=\\\"text-center\\\">姓名</th>\\r\\n                    <th class=\\\"text-center\\\">身份证号</th>\\r\\n\\r\\n                    <th class=\\\"text-center\\\">证书号</th>\\r\\n                    <th class=\\\"text-center\\\">工种</th>\\r\\n                    <th class=\\\"text-center\\\">学号</th>\\r\\n\\r\\n                    <th class=\\\"text-center\\\">可置换专业层次</th>\\r\\n                    <th class=\\\"text-center\\\">申报专业</th>\\r\\n                    <th class=\\\"text-center\\\">申报日期</th>\\r\\n                    \\r\\n                </tr>\\r\\n            </thead>\\r\\n            <tbody>\\r\\n                <tr ng-repeat=\\\"result in results\\\">\\r\\n                    <td>\\r\\n                        <input type=\\\"checkbox\\\" ng-model=\\\"result.selected\\\">\\r\\n                    </td>\\r\\n                    <td>{{result._id}}</td>\\r\\n                    <td>{{result.name}}</td>\\r\\n                    <td>{{result.idnumber}}</td>\\r\\n                    <td>{{result.certnumber}}</td>\\r\\n                    <td>{{result.worktype}}</td>\\r\\n                    <td>{{result.studNumber}}</td>\\r\\n                    <td>{{result.applEduLvl}}</td>\\r\\n                    <td>{{result.major}}</td>\\r\\n                    <td>{{result.appliedDate}}</td>\\r\\n                    \\r\\n                </tr>\\r\\n            </tbody>\\r\\n        </table>\\r\\n    </div>\\r\\n    <div class=\\\"pagin\\\">\\r\\n        <pagination total-items=\\\"pagination.total\\\" ng-model=\\\"pagination.currentPage\\\" items-per-page=\\\"pagination.itemsPerPage\\\" class=\\\"pagination-sm\\\" boundary-links=\\\"true\\\" previous-text=\\\"&lsaquo;\\\" next-text=\\\"&rsaquo;\\\" first-text=\\\"&laquo;\\\" last-text=\\\"&raquo;\\\" ng-change=\\\"pageChanged()\\\" max-size=\\\"pagination.maxSize\\\" num-pages=\\\"pagination.numPages\\\">\\r\\n        </pagination>\\r\\n\\r\\n        <span class=\\\"pager-info label label-primary\\\">共{{pagination.total}}条目，{{pagination.numPages}}页</span>\\r\\n    </div>\\r\\n\\r\\n\\r\\n</div>\\r\\n\");\n$templateCache.put(\"views/delete-major.modal.html\",\"<div class=\\\"modal-body\\\">\\r\\n<form>\\r\\n    <label class=\\\"radio-inline\\\">\\r\\n        <input type=\\\"radio\\\" ng-model=\\\"delAppl\\\" value=\\\"yes\\\"> 删除该专业下所有申请信息\\r\\n    </label>\\r\\n    <label class=\\\"radio-inline\\\">\\r\\n        <input type=\\\"radio\\\" ng-model=\\\"delAppl\\\" value=\\\"\\\"> 保留申请信息（将会造成信息混乱，不推荐）\\r\\n    </label>\\r\\n    \\r\\n</form>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"modal-footer\\\">\\r\\n    <button class=\\\"btn btn-primary\\\" ng-click=\\\"ok()\\\">删除</button>\\r\\n    <button class=\\\"btn btn-primary\\\" ng-click=\\\"cancel()\\\">取消</button>\\r\\n</div>\\r\\n\");\n$templateCache.put(\"views/editor.html\",\"<div ng-controller=\\\"editorCtrl\\\">\\r\\n\\r\\n    <div tabset>\\r\\n        <div tab heading=\\\"学分制换办法\\\" select=\\\"selectTab(\\'readme\\')\\\">\\r\\n\\r\\n            <form ng-submit=\\\"submit(\\'readme\\')\\\">\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label>标题(按钮):</label>\\r\\n                    <input type=\\\"text\\\" ng-model=\\\"articles.readme.title\\\">\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label>次序</label>\\r\\n                    <select ng-options=\\\"o for o in [1,2,3]\\\" ng-model=\\\"articles.readme.order\\\">                   \\r\\n                        \\r\\n                    </select>\\r\\n                </div>\\r\\n                <textarea name=\\\"content\\\" style=\\\"width:100%;\\\" id=\\\"readme\\\"></textarea>\\r\\n                <input type=\\\"submit\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"freezed\\\" value=\\\"保存\\\">\\r\\n                <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"preview(\\'readme\\')\\\">预览</button>\\r\\n            </form>\\r\\n\\r\\n        </div>\\r\\n\\r\\n        <div tab select=\\\"selectTab(\\'help\\')\\\">\\r\\n            <tab-heading>我要帮助</tab-heading>\\r\\n            <form ng-submit=\\\"submit(\\'help\\')\\\">\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label>标题(按钮):</label>\\r\\n                    <input type=\\\"text\\\" ng-model=\\\"articles.help.title\\\">\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label>次序</label>\\r\\n                    <select ng-options=\\\"o for o in [1,2,3]\\\" ng-model=\\\"articles.help.order\\\">\\r\\n                        \\r\\n                    </select>\\r\\n                </div>\\r\\n                <textarea name=\\\"content\\\" style=\\\"width:100%;\\\" id=\\\"help\\\"></textarea>\\r\\n                <input type=\\\"submit\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"freezed\\\" value=\\\"保存\\\">\\r\\n                <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"preview(\\'help\\')\\\">预览</button>\\r\\n            </form>\\r\\n        </div>\\r\\n\\r\\n        <div tab heading=\\\"学习中心\\\" select=\\\"selectTab(\\'center\\')\\\">\\r\\n\\r\\n            <form ng-submit=\\\"submit(\\'center\\')\\\">\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label>标题(按钮):</label>\\r\\n                    <input type=\\\"text\\\" ng-model=\\\"articles.center.title\\\">\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <select ng-options=\\\"o for o in [1,2,3]\\\" ng-model=\\\"articles.center.order\\\">\\r\\n                        \\r\\n                    </select>\\r\\n                </div>\\r\\n                \\r\\n                <textarea name=\\\"content\\\" id=\\\"center\\\" style=\\\"width:100%;\\\"></textarea>\\r\\n\\r\\n                <input type=\\\"submit\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"freezed\\\" value=\\\"保存\\\">\\r\\n                <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"preview(\\'center\\')\\\">预览</button>\\r\\n\\r\\n            </form>\\r\\n\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n\\r\\n</div>\\r\\n\");\n$templateCache.put(\"views/err-msgs.html\",\"<div ng-message=\\\"required\\\">必填</div>\\r\\n<div ng-message=\\\"minlength\\\">太短了</div>\\r\\n<div ng-message=\\\"equals\\\">两次输入不一样</div>\");\n$templateCache.put(\"views/login.html\",\"<div class=\\\"modal-body\\\">\\r\\n    <form class=\\\"form-horizontal\\\" role=\\\"form\\\">\\r\\n        <div class=\\\"form-group\\\">\\r\\n            <label class=\\\"col-sm-4 control-label\\\">用户名</label>\\r\\n            <div class=\\\"col-sm-8\\\">\\r\\n                <input type=\\\"text\\\" ng-model=\\\"user.name\\\" class=\\\"form-control\\\"  gf-enter=\\\"ok()\\\" auto-focus>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"form-group\\\">\\r\\n            <label class=\\\"col-sm-4 control-label\\\">密码</label>\\r\\n            <div class=\\\"col-sm-8\\\">\\r\\n                <input type=\\\"password\\\" ng-model=\\\"user.password\\\" class=\\\"form-control\\\"  gf-enter=\\\"ok()\\\">\\r\\n            </div>\\r\\n        </div>\\r\\n\t</form>        \\r\\n        \\r\\n</div>\\r\\n\\r\\n<div class=\\\"modal-footer\\\">\\r\\n    <button class=\\\"btn btn-primary\\\" ng-click=\\\"ok()\\\" ng-disabled=\\\"!user\\\">登录</button>\\r\\n    <button class=\\\"btn btn-primary\\\" ng-click=\\\"cancel()\\\">取消</button>\\r\\n</div>\\r\\n\");\n$templateCache.put(\"views/major-and-work-type.html\",\"<div ng-controller=\\\"mwCtrl\\\" ng-cloak>\\r\\n    <div class=\\\"control-panel\\\">\\r\\n        <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"addMajor()\\\" ng-disabled=\\\"!hasListed\\\">添加专业</button>\\r\\n    </div>\\r\\n    <div class=\\\"main-panel\\\">\\r\\n        <div class=\\\"major-container\\\">\\r\\n            <div ng-repeat=\\\"major in majors\\\">\\r\\n                <div live-create my-model=\\\"major\\\" upsert=\\\"upsertMajor(major, cb)\\\" remove-fn=\\\"removeMajor(major, $index, cb)\\\" remove-from-dom=\\\"rmFromCollection(majors, $index)\\\" add-child=\\\"addWT(major)\\\" has-child my-placeholder=\\\"输入专业名称\\\" my-class=\\\"major\\\">\\r\\n                    <div class=\\\"wt-container\\\">\\r\\n\\r\\n                        <div ng-repeat=\\\"workType in major.workTypes\\\">\\r\\n                            <div live-create mode=\\\"simple\\\" my-model=\\\"workType\\\" upsert=\\\"createWT(major._id, workType, cb)\\\" remove-from-dom=\\\"rmFromCollection(major.workTypes, $index)\\\" remove-fn=\\\"removeWT(major, workType, $index)\\\" my-placeholder=\\\"输入工种名称\\\" my-class=\\\"work-type\\\"></div>\\r\\n                        </div>\\r\\n\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\");\n$templateCache.put(\"views/sys-account.html\",\"<div ng-controller=\\\"userCtrl\\\">\\r\\n    <button class=\\\"btn btn-primary\\\" ng-click=\\\"upsert()\\\">添加子管理员</button>\\r\\n    <span>子管理员无添加、编辑、删除功能，但可以查看、搜索</span>\\r\\n    <div class=\\\"user-panel\\\">\\r\\n        <table class=\\\"table table-bordered table-hover text-center\\\">\\r\\n            <thead>\\r\\n                <tr>\\r\\n                    <th class=\\\"text-center\\\">帐号名</th>\\r\\n                    <th></th>\\r\\n                </tr>\\r\\n            </thead>\\r\\n            <tbody>\\r\\n                <tr ng-repeat=\\\"user in users\\\">\\r\\n                    <td>{{user.name}}</td>\\r\\n                    <td>\\r\\n                        <button class=\\\"btn btn-xs\\\" ng-click=\\\"upsert(user)\\\">编辑</button>\\r\\n                        <button class=\\\"btn btn-xs\\\" ng-click=\\\"remove(user)\\\">删除</button>\\r\\n                    </td>\\r\\n                </tr>\\r\\n            </tbody>\\r\\n\\r\\n        </table>\\r\\n    </div>\\r\\n</div>\\r\\n\");\n$templateCache.put(\"views/upsert-user.html\",\"\\r\\n<div class=\\\"modal-header\\\">\\r\\n    <h2 ng-show=\\\"!editing\\\">添加子管理员</h2>\\r\\n    <h2 ng-show=\\\"editing\\\">编辑子管理员</h2>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n    <form class=\\\"form-horizontal\\\" role=\\\"form\\\" name=\\\"userForm\\\">\\r\\n        <div class=\\\"form-group\\\">\\r\\n            <label class=\\\"col-sm-3 control-label\\\">用户名</label>\\r\\n            <div class=\\\"col-sm-6\\\">\\r\\n                <input type=\\\"text\\\" ng-model=\\\"user.name\\\" class=\\\"form-control\\\" gf-enter=\\\"!userForm.$invalid && ok()\\\" auto-focus required name=\\\"name\\\">\\r\\n            </div>\\r\\n            <!-- <div class=\\\"text-danger col-sm-3 form-control-static\\\" ng-show=\\\"userForm.name.$invalid && userForm.name.$dirty\\\">\\r\\n                {{getError(userForm.name)}}\\r\\n            </div> -->\\r\\n            <div class=\\\"text-danger col-sm-3 form-control-static\\\" gf-val=\\\"name\\\" overwrite-msg=\\\"{required:\\\" 真的得必填 \\\"}\\\"></div>\\r\\n            <!-- <div class=\\\"text-danger col-sm-3 form-control-static\\\" ng-messages=\\\"userForm.name.$touched && userForm.name.$error\\\" ng-messages-include=\\\"views/err-msgs.html\\\"></div> -->\\r\\n        </div>\\r\\n        <div class=\\\"form-group\\\">\\r\\n            <label class=\\\"col-sm-3 control-label\\\">密码</label>\\r\\n            <div class=\\\"col-sm-6\\\">\\r\\n                <input type=\\\"password\\\" ng-model=\\\"user.password\\\" class=\\\"form-control\\\" gf-enter=\\\"!userForm.$invalid && ok()\\\" equals=\\\"{{p2}}\\\" name=\\\"password\\\" required ng-minlength=\\\"6\\\">\\r\\n            </div>\\r\\n            <div class=\\\"text-danger col-sm-3 form-control-static\\\" gf-val=\\\"password\\\">\\r\\n            </div>\\r\\n            <!-- <div class=\\\"text-danger col-sm-3 form-control-static\\\" ng-messages=\\\"userForm.password.$touched && userForm.password.$error\\\" ng-messages-include=\\\"views/err-msgs.html\\\"></div> -->\\r\\n        </div>\\r\\n        <div class=\\\"form-group\\\">\\r\\n            <label class=\\\"col-sm-3 control-label\\\">确认密码</label>\\r\\n            <div class=\\\"col-sm-6\\\">\\r\\n                <input type=\\\"password\\\" ng-model=\\\"p2\\\" class=\\\"form-control\\\" gf-enter=\\\"!userForm.$invalid && ok()\\\" equals=\\\"{{user.password}}\\\" name=\\\"p2\\\" required>\\r\\n            </div>\\r\\n            <div class=\\\"text-danger col-sm-3 form-control-static\\\" gf-val=\\\"p2\\\"></div>\\r\\n            \\r\\n        </div>\\r\\n    </form>\\r\\n\\r\\n</div>\\r\\n\\r\\n<div class=\\\"modal-footer\\\">\\r\\n    <button class=\\\"btn btn-primary\\\" ng-click=\\\"ok()\\\" ng-disabled=\\\"userForm.$invalid\\\">{{editing?\\'确认\\':\\'添加\\'}}</button>\\r\\n    <button class=\\\"btn btn-primary\\\" ng-click=\\\"cancel()\\\">取消</button>\\r\\n</div>\\r\\n\");}]);"],"sourceRoot":"/source/"}